"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[329],{7329:function(a,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=function(){var a=this,t=a._self._c;return t("section",{staticClass:"pc-container pb-4 px-4"},[t("div",{staticClass:"pcoded-content"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header py-3"},[t("div",{staticClass:"d-flex align-items-center"},[t("h5",[a._v("Lista de Instancias")]),t("button",{staticClass:"btn btn-success btn-sm px-4 ml-auto rounded-1",on:{click:a.mostrarModal}},[a._v(" Nuevo ")])])]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"table-responsive"},[t("table",{ref:"myDataTable",staticClass:"table",attrs:{id:"table"}},[a._m(0),t("tbody",a._l(a.instancias,(function(s,i){return t("tr",{key:i},[a._m(1,!0),t("td",[a._v(a._s(s.ins_nombre))]),t("td",{staticClass:"text-center"},[t("a",{staticClass:"text-primary px-2 py-1 btn-lg mx-1",attrs:{href:"javascript:void(0)"},on:{click:function(t){return a.editar(s.ins_id)}}},[a._m(2,!0)]),t("a",{staticClass:"px-2 py-1 btn-lg text-danger",attrs:{href:"javascript:void(0)"},on:{click:function(t){return a.borrar(s.ins_id)}}},[a._m(3,!0)])])])})),0)])])])]),a.showModal?t("div",{staticClass:"modal",on:{click:a.cerrarModal}},[t("div",{staticClass:"modal-content card border-0",on:{click:function(a){a.stopPropagation()}}},[t("div",{staticClass:"card-header"},[t("h5",{staticClass:"text-center"},[a._v(" "+a._s(a.instancia.ins_id?"Actualizar Instancia":"Registar Nueva Instancia")+" ")])]),t("div",{staticClass:"card-body mb-0 pb-0"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("Nombre")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.instancia.ins_nombre,expression:"instancia.ins_nombre"}],staticClass:"form-control",class:{"has-error":a.errores.ins_nombre},domProps:{value:a.instancia.ins_nombre},on:{input:[function(t){t.target.composing||a.$set(a.instancia,"ins_nombre",t.target.value)},function(t){return a.validarCampo("ins_nombre")}],keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.guardar.apply(null,arguments)}}}),a.errores.ins_nombre?t("span",{staticClass:"error-message"},[a._v("Ingrese el nombre de la Instancia.")]):a._e()])])])]),t("div",{staticClass:"card-footer border-0 mt-0 pt-0"},[t("div",{staticClass:"d-flex justify-content-end"},[t("button",{staticClass:"btn btn-secondary btn-lg px-4 mx-2 rounded",on:{click:a.cerrarModal}},[a._v("Cerrar")]),t("button",{staticClass:"btn btn-primary btn-lg px-4 rounded",on:{click:a.guardar}},[a.isLoading?t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t("span",[a._v(a._s(a.instancia.ins_id?"Actualizar":"Guardar"))])])])])])]):a._e()])])},n=[function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-center pl-4 col-lg-2 col-sm-1"},[a._v("#")]),t("th",[a._v("Nombre")]),t("th",{staticClass:"text-center"},[a._v("Opciones")])])])},function(){var a=this,t=a._self._c;return t("td",{staticClass:"text-center py-2 my-0"},[t("input",{staticClass:"form-check-input me-1",attrs:{type:"checkbox",value:""}})])},function(){var a=this,t=a._self._c;return t("span",{},[t("i",{attrs:{"data-feather":"edit"}})])},function(){var a=this,t=a._self._c;return t("span",[t("i",{attrs:{"data-feather":"trash"}})])}],e=s(59911),r=s.n(e),c=s(2637),o={name:"instancias",mixins:[c.A],mounted(){this.leer()},updated(){r().replace()},data(){return{dataTable:null,showModal:!1,instancias:[],instancia:{ins_id:"",ins_nombre:""},errores:{ins_nombre:!1},isLoading:!1,editingIndex:null}},methods:{validarCampo(a){this.errores[a]=""===this.instancia[a]},validarCampos(){return Object.keys(this.errores).forEach((a=>{this.validarCampo(a,a)})),!Object.values(this.errores).some((a=>a))},async leer(){try{this.$showLoadingAlert();const a=await this.$getData("instance",this);this.instancias=a.data,this.initDataTable(),this.$closeLoadingAlert()}catch(a){this.$handleApiError(a,"cargar distritos judiciales")}},async actualizarTable(){try{const a=await this.$getData("instance",this);this.instancias=a.data,this.initDataTable()}catch(a){this.$handleApiError(a,"cargar instancias")}},async crear(){if(this.validarCampos())try{this.isLoading=!0;const a={ins_nombre:this.instancia.ins_nombre},t=await this.$postData("instance/store",this,a);"success"===t.state&&(await this.actualizarTable(),this.isLoading=!1,this.cerrarModal())}catch(a){this.$handleApiError(a,"crear distrito judicial")}},async actualizar(a){if(this.validarCampos())try{this.isLoading=!0;const t={ins_id:a,ins_nombre:this.instancia.ins_nombre},s=await this.$putData("instance/update",this,t),i=s.data;if("success"===s.state){const a=this.instancias.findIndex((a=>a.ins_id===this.instancia.ins_id));-1!==a&&this.$set(this.instancias,a,i),this.isLoading=!1,this.cerrarModal()}}catch(t){this.$handleApiError(t,"actualizar distrito judicial")}},async borrar(a){this.$warningAlertWithCancel("Confirmar Eliminación","¿Estás seguro de que deseas eliminar esta Instancia?",(async()=>{try{this.$showLoadingAlert("Eliminando","");const t={ins_id:a},s=await this.$deleteData("instance/destroy",this,t);"success"===s.state&&(await this.actualizarTable(),this.$closeLoadingAlert())}catch(t){this.$closeLoadingAlert(),this.$handleApiError(t,t.message)}}),(()=>{console.log("Eliminar instancia cancelado")}))},editar(a){const t=this.instancias.find((t=>t.ins_id===a));t?(this.instancia={...t},this.showModal=!0):console.error("Instancia no encontrado")},guardar(){try{this.instancia.ins_id?this.actualizar(this.instancia.ins_id):this.crear()}catch(a){console.error(a)}},initDataTable(){this.dataTable&&this.dataTable.destroy(),this.$nextTick((()=>{this.dataTable=$("#table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}}),r().replace()}))},mostrarModal(){this.showModal=!0},cerrarModal(){this.showModal=!1,this.errores.ins_nombre=!1,this.instancia.ins_id="",this.instancia.ins_nombre=""}}},l=o,d=s(81656),h=(0,d.A)(l,i,n,!1,null,"42f2d8cc",null),u=h.exports},2637:function(a,t){t.A={methods:{async initDataTable(){this.destroyDataTable(),await this.$nextTick(),this.dataTable=$(this.$refs.myDataTable).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},destroyDataTable(){this.dataTable&&this.dataTable.destroy()&&(this.dataTable=null)}},beforeDestroy(){this.destroyDataTable()}}}}]);
//# sourceMappingURL=329.6b4c5adf.js.map