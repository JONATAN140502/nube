"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[634],{634:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"pc-container pb-4 px-4"},[t("div",{staticClass:"pcoded-content"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header py-3"},[t("div",{staticClass:"d-flex align-items-center"},[t("h5",[e._v("Lista de Pretensiones")]),t("button",{staticClass:"btn btn-success btn-sm px-4 ml-auto rounded-1",on:{click:e.mostrarModal}},[e._v(" Nuevo ")])])]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered",attrs:{id:"miTabla1"}},[e._m(0),t("tbody",e._l(e.pretensiones,(function(r,s){return t("tr",{key:r.pre_id},[e._m(1,!0),t("td",[e._v(e._s(r.pre_nombre))]),t("td",{staticClass:"text-center"},[t("a",{staticClass:"text-primary px-2 py-1 btn-lg mx-1",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.editar(r.pre_id)}}},[e._m(2,!0)]),t("a",{staticClass:"px-2 py-1 btn-lg text-danger",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.borrar(r.pre_id)}}},[e._m(3,!0)])])])})),0)])])])]),e.modalVisible?t("div",{staticClass:"modal",on:{click:e.cerrarModal}},[t("div",{staticClass:"modal-content card border-0",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"card-header"},[t("h5",{staticClass:"text-center"},[e._v(" "+e._s(e.pretension.pre_id?"Actualizar Pretensión":"Registro de nueva Pretensión ")+" ")])]),t("div",{staticClass:"card-body mb-0 pb-0"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[e._v("Nombre")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pretension.pre_nombre,expression:"pretension.pre_nombre"}],staticClass:"form-control",class:{"has-error":e.errores.pre_nombre},domProps:{value:e.pretension.pre_nombre},on:{blur:e.validarNombre,input:[function(t){t.target.composing||e.$set(e.pretension,"pre_nombre",t.target.value)},function(t){e.errores.pre_nombre=!1}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.guardar.apply(null,arguments)}}}),e.errores.mat_nombre?t("span",{staticClass:"error-message"},[e._v("Ingrese un nombre de Pretensión.")]):e._e()])])])]),t("div",{staticClass:"card-footer border-0 mt-0 pt-0"},[t("div",{staticClass:"d-flex justify-content-end"},[t("button",{staticClass:"btn btn-secondary btn-lg px-4 mx-2 rounded",on:{click:e.cerrarModal}},[e._v("Cerrar")]),t("button",{staticClass:"btn btn-primary btn-lg px-4 rounded",on:{click:e.guardar}},[e._v(" "+e._s(e.pretension.pre_id?"Actualizar":"Guardar")+" ")])])])])]):e._e()])])},a=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-center pl-4 col-lg-2 col-sm-1"},[e._v("#")]),t("th",[e._v("Nombre")]),t("th",{staticClass:"text-center"},[e._v("Opciones")])])])},function(){var e=this,t=e._self._c;return t("td",{staticClass:"text-center py-2 my-0"},[t("input",{staticClass:"form-check-input me-1",attrs:{type:"checkbox",value:""}})])},function(){var e=this,t=e._self._c;return t("span",{},[t("i",{attrs:{"data-feather":"edit"}})])},function(){var e=this,t=e._self._c;return t("span",[t("i",{attrs:{"data-feather":"trash"}})])}],i=r(98164),o=r.n(i),n=r(77387),l=r.n(n),c=(r(50563),r(22619),r(63822)),d={name:"pretensiones",created(){this.leer()},mounted(){this.$nextTick((()=>{o().replace()}))},data(){return{dataTable:null,modalVisible:!1,pretensiones:[],pretension:{pre_id:"",pre_nombre:""},errores:{pre_nombre:!1}}},methods:{...(0,c.nv)(["get","post"]),validarCampo(e,t){""===this.pretension[e]?this.errores[t]=!0:this.errores[t]=!1},editar(e){try{const t=this.pretensiones.find((t=>t.pre_id===e));t?(this.pretension={...t},this.modalVisible=!0):console.log("Materia no encontrada")}catch(t){console.error(t)}},validarNombre(){this.pretension.pre_nombre=this.pretension.pre_nombre,this.validarCampo("pre_nombre","pre_nombre")},validarCampos(){return this.validarNombre(),!Object.values(this.errores).some((e=>e))},async leer(){try{const e=await this.get({url:this.$store.getters.get__url+"/claim",token:this.$store.getters.get__token});console.log(e),this.pretensiones=e.data,this.initDataTable()}catch(e){console.error("Error al intentar obtener los datos",e)}},async crear(){if(this.validarCampos())try{const e=await this.post({url:`${this.$store.getters.get__url}/claim/store`,token:this.$store.getters.get__token,params:this.pretension});0===e.state?(this.modalVisible=!1,await this.leer(),this.pretension.pre_nombre=""):console.error("Error en la respuesta del servidor:",e.message)}catch(e){console.error("Error en la solicitud:",e)}else console.error("Error en la validación de los campos del formulario de registro.")},async actualizar(e){if(this.validarCampos())try{const t=await this.post({url:this.$store.getters.get__url+"/claim/update",token:this.$store.getters.get__token,params:{pre_id:e,pre_nombre:this.pretension.pre_nombre}});0==t.state?(this.modalVisible=!1,await this.leer()):console.log("error")}catch(t){console.error(t)}else console.error("Error en la validación de los campos del formulario de registro.")},async borrar(e){try{alert("Seguro de eliminar.");const t=await this.post({url:this.$store.getters.get__url+"/claim/destroy",token:this.$store.getters.get__token,params:{pre_id:e}});0==t.state?await this.leer():console.log("error")}catch(t){console.error(t)}},guardar(){try{this.pretension.pre_id?this.actualizar(this.pretension.pre_id):(this.crear(),console.log("crear"))}catch(e){console.error(e)}},initDataTable(){this.dataTable&&this.dataTable.destroy(),this.$nextTick((()=>{this.dataTable=l()("#miTabla1").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}}),o().replace()}))},mostrarModal(){this.modalVisible=!0},cerrarModal(){this.modalVisible=!1,this.errores.pre_nombre=!1,this.pretension.pre_id="",this.pretension.pre_nombre=""}}},p=d,m=r(1001),u=(0,m.Z)(p,s,a,!1,null,"300e9371",null),h=u.exports}}]);
//# sourceMappingURL=634.8f2e1466.js.map