"use strict";(self["webpackChunksisge"]=self["webpackChunksisge"]||[]).push([[286],{60286:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});var i=function(){var t=this,a=t._self._c;return a("section",{staticClass:"pc-container"},[a("div",{staticClass:"pcoded-content"},[a("div",{staticClass:"row mb-4 d-flex justify-content-between"},[a("div",{staticClass:"col-sm-12 col-md-6 col-xl-9"},[a("h5",{staticClass:"text-dark fw-bold"},[a("button",{staticClass:"btn btn-sm mr-2 btn-primary",on:{click:t.goBack}},[a("i",{attrs:{"data-feather":"arrow-left"}})]),t._v(" Expedientes administrativos "+t._s(t.tipoOficio)+" ")])]),a("div",{staticClass:"col-sm-12 col-md-6 col-xl-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.anioLocal,expression:"anioLocal"}],staticClass:"form-control",on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.anioLocal=a.target.multiple?e:e[0]},function(a){return t.mostrarTradesAnio()}]}},t._l(t.anios,(function(e,i){return a("option",{key:i,staticClass:"py-3",domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12"},[a("div",{staticClass:"card shadow"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{ref:"dataTable",staticClass:"table",attrs:{id:"table"}},[t._m(0),a("tbody",t._l(t.tradesAnio,(function(e){return a("tr",{key:e.tra_id},[a("td",[a("router-link",{attrs:{to:{name:"oficio/detalle",params:{id:e.tra_id}}}},[t._v(" "+t._s(e.tra_number)+" ")])],1),a("td",[t._v(t._s(e.area.are_name))]),a("td",[t._v(t._s(t.formatDate(e.tra_arrival_date)))]),a("td",[t._v(t._s(t.referencias(e.tra_exp_ext,e.tra_doc_recep))+" ")]),a("td",[t._v(t._s(e&&e.report&&e.report.rep_oficio?e.report.rep_oficio:"---"))]),a("td",[t._v(t._s(e&&e.report&&e.report.rep_informe?e.report.rep_informe:"---"))]),"P"===e.tra_state_law?a("td",{staticClass:"pr-5"},[a("span",{class:t.badgeClassOficio(e.tra_state_law)},[t._v(" Pendiente ")])]):t._e(),"F"===e.tra_state_law?a("td",{staticClass:"pr-5"},[a("span",{class:t.badgeClassOficio(e.tra_state_law)},[t._v(" Terminado ")])]):t._e()])})),0)])])])])])])])])},s=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("N° de expediente")]),a("th",[t._v("Área de origen")]),a("th",[t._v("Fecha")]),a("th",[t._v("Referencias")]),a("th",[t._v("Oficio")]),a("th",[t._v("Informe")]),a("th",[t._v("Estado")])])])}],r=(e(44114),e(25800)),o=e(90740),n=e.n(o),l=e(49148),c=e.n(l),d=e(46587),h={name:"Buscar",props:["tipo_tra","anio"],mounted(){this.$nextTick((()=>{n().replace()})),this.cargarAños(),this.cargarTrades()},data(){return{anioLocal:this.anio,anios:[],tradesAnio:[],trades:[],dataTable:null,tipoOficio:null}},methods:{async"cargarAños"(){this.$showLoadingAlert();const t=(new Date).getFullYear();for(let a=t;a>=2022;a--)this.anios.push(a),parseInt(this.anioLocal)===a&&(this.anioLocal=a)},async cargarTrades(){try{this.mostrarTipoTrade();const t=await this.$getData("trade",this);this.trades=t.data,void 0===this.anioLocal&&(this.anioLocal=(new Date).getFullYear()),this.tradesAnio=this.trades.filter((t=>t.anio===this.anioLocal)),"terminado"===this.tipo_tra?this.tradesAnio=this.tradesAnio.filter((t=>"F"===t.tra_state_law)):"pendiente"===this.tipo_tra&&(this.tradesAnio=this.tradesAnio.filter((t=>"P"===t.tra_state_law))),this.initDataTable(),this.$closeLoadingAlert()}catch(t){this.$handleApiError(t,"cargar oficios")}},async initDataTable(){this.destroyDataTable(),await this.$nextTick(),this.dataTable=d(this.$refs.dataTable).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},mostrarTradesAnio(){const t=parseInt(this.anioLocal);this.tradesAnio=[],this.tradesAnio=this.trades.filter((a=>a.anio===t)),"terminado"===this.tipo_tra?this.tradesAnio=this.tradesAnio.filter((t=>"F"===t.tra_state_law)):"pendiente"===this.tipo_tra&&(this.tradesAnio=this.tradesAnio.filter((t=>"P"===t.tra_state_law))),this.initDataTable()},destroyDataTable(){this.dataTable&&this.dataTable.destroy()&&(this.dataTable=null)},mostrarTipoTrade(){"terminado"===this.tipo_tra?this.tipoOficio="atendidos (Con informe)":"pendiente"===this.tipo_tra?this.tipoOficio="pendientes (Sin informe)":this.tipoOficio=""},referencias(t,a){var e="";return e=null!==t&null!==a?t+" / "+a:null!==t&null===a?t:null===t&null!==a?a:"---",e},goBack(){this.$router.push("/panel")},formatDate(t){return c().locale("es"),c()(t).format("DD MMM YYYY")},badgeClassOficio:r.H1},watch:{tipo_tra:"cargarTrades"}},_=h,p=e(81656),u=(0,p.A)(_,i,s,!1,null,"38503ac2",null),f=u.exports}}]);
//# sourceMappingURL=286.43506822.js.map