{"version":3,"file":"js/785.06a23e6b.js","mappings":"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","sources":["webpack://legalcase/./src/views/login.vue","webpack://legalcase/src/views/login.vue","webpack://legalcase/./src/views/login.vue?568d","webpack://legalcase/./src/views/login.vue?512a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"auth-wrapper\"},[_c('Loader',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loader),expression:\"loader\"}]}),_c('div',{staticClass:\"auth-content\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"row align-items-center\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"text-center\"},[_c('img',{staticClass:\"img-fluid mb-4\",attrs:{\"src\":require(\"../assets/images/logo-unprg.png\"),\"alt\":\"\"}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showUserError),expression:\"showUserError\"}],staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.userErrorMessage))])]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.loginSend.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group mb-3\"},[_c('label',{staticClass:\"form-label text-left fw-bold\"},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.login),expression:\"login.login\"}],ref:\"emailInput\",staticClass:\"form-control\",class:{ 'has-error': _vm.errores.login },attrs:{\"type\":\"text\",\"placeholder\":\"guest@gmail.com\"},domProps:{\"value\":(_vm.login.login)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(_vm.login, \"login\", $event.target.value)},function($event){_vm.errores.login = false}]}}),(_vm.errores.login)?_c('span',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.mensajes.email))]):_vm._e()]),_c('div',{staticClass:\"form-group mb-3\"},[_c('label',{staticClass:\"form-label justify-content-end fw-bold\"},[_vm._v(\"Contraseña\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.login.password),expression:\"login.password\"}],staticClass:\"form-control\",class:{ 'has-error': _vm.errores.password },attrs:{\"type\":\"password\",\"placeholder\":\"Contraseña\"},domProps:{\"value\":(_vm.login.password)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(_vm.login, \"password\", $event.target.value)},function($event){_vm.errores.password = false}],\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.loginSend.apply(null, arguments)}}}),(_vm.errores.password)?_c('span',{staticClass:\"error-message\"},[_vm._v(\"Ingrese una contraseña.\")]):_vm._e()]),_c('div',{staticClass:\"text-center pt-3\"},[_c('button',{staticClass:\"btn btn-lg btn-primary mb-4 w-100 fw-bold rounded-pill\",on:{\"click\":_vm.loginSend}},[_vm._v(\"Iniciar Sesión\")])])])])])])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"auth-wrapper\">\r\n    <Loader v-show=\"loader\" />\r\n    <div class=\"auth-content\">\r\n      <div class=\"card\">\r\n        <div class=\"row align-items-center\">\r\n          <div class=\"col-md-12\">\r\n            <div class=\"card-body\">\r\n              <div class=\"text-center\">\r\n                <img src=\"../assets/images/logo-unprg.png\" alt=\"\" class=\"img-fluid mb-4\">\r\n\r\n                <!-- <h6 class=\"py-4\" style=\"font-size: 18px; font-weight: 700;\">Bienvenido al Sistema de Gestion de\r\n                  Expedientes Legales</h6> -->\r\n                <span class=\"error-message\" v-show=\"showUserError\">{{ userErrorMessage }}</span>\r\n              </div>\r\n              <form @submit.prevent=\"loginSend\">\r\n                <div class=\"form-group mb-3\">\r\n                  <label class=\"form-label text-left fw-bold\">Email</label>\r\n                  <input ref=\"emailInput\" type=\"text\" class=\"form-control\" placeholder=\"guest@gmail.com\"\r\n                    v-model=\"login.login\" @input=\"errores.login = false\" :class=\"{ 'has-error': errores.login }\">\r\n                  <span class=\"error-message\" v-if=\"errores.login\">{{ mensajes.email }}</span>\r\n                </div>\r\n\r\n                <div class=\"form-group mb-3\">\r\n                  <label class=\"form-label justify-content-end fw-bold\">Contraseña</label>\r\n                  <input type=\"password\" class=\"form-control\" placeholder=\"Contraseña\" v-model=\"login.password\"\r\n                    @input=\"errores.password = false\" :class=\"{ 'has-error': errores.password }\" @keyup.enter=\"loginSend\">\r\n                  <span class=\"error-message\" v-if=\"errores.password\">Ingrese una contraseña.</span>\r\n                </div>\r\n\r\n                <!-- <div class=\"form-group text-left mt-2\">\r\n                <div class=\"form-check\">\r\n                  <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckChecked\">\r\n                  <label class=\"form-check-label\" for=\"flexCheckChecked\">\r\n                    Guardar Credenciales de acceso\r\n                  </label>\r\n                </div>\r\n              </div> -->\r\n\r\n                <div class=\"text-center pt-3\">\r\n                  <button class=\"btn btn-lg btn-primary mb-4 w-100  fw-bold rounded-pill\" @click=\"loginSend\">Iniciar\r\n                    Sesión</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loader from '../components/Loader/LoaderModal.vue';\r\nimport { mapActions } from 'vuex';\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2';\r\nexport default {\r\n  name: 'Login',\r\n  components: {\r\n    Loader\r\n  },\r\n  data() {\r\n    return {\r\n      login: {\r\n        login: null,\r\n        password: null,\r\n      },\r\n      errores: {\r\n        login: false,\r\n        password: false,\r\n      },\r\n      mensajes: {\r\n        email: null,\r\n      },\r\n      url: '',\r\n      showUserError: false,\r\n      showOtherError: false,\r\n      userErrorMessage: '',\r\n      otherErrorMessage: '',\r\n      loader: false\r\n    };\r\n  },\r\n  created() {\r\n    this.url = this.$store.getters.get__url;\r\n  },\r\n  methods: {\r\n    ...mapActions(['get', 'post']),\r\n\r\n    validateEmail(email) {\r\n      const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n      return emailRegex.test(email);\r\n    },\r\n    validarCorreo() {\r\n      if (!this.login.login) {\r\n        this.errores.login = true;\r\n        this.mensajes.email = 'Ingrese un email.';\r\n      } else if (!this.validateEmail(this.login.login)) {\r\n        this.errores.login = true;\r\n        this.mensajes.email = 'Ingrese un email válido.';\r\n      } else {\r\n        this.errores.login = false;\r\n        this.mensajes.email = null; // Reinicia el mensaje de error si el correo es válido\r\n      }\r\n    },\r\n    validarCampo(campo, propiedadError) {\r\n      if (this.login[campo] === null || this.login[campo] === '') {\r\n        this.errores[propiedadError] = true;\r\n      } else {\r\n        this.errores[propiedadError] = false;\r\n      }\r\n    },\r\n    validarUser() {\r\n      this.validarCampo('login', 'login');\r\n      if (this.login.login === null || this.login.login === '') {\r\n        this.errores.login = true;\r\n        this.mensajes.email = 'Ingrese un email.';\r\n      } else {\r\n        this.validarCorreo();\r\n      }\r\n    },\r\n    validarPassword() {\r\n      this.validarCampo('password', 'password');\r\n    },\r\n    validarCampos() {\r\n      this.validarUser();\r\n      this.validarPassword();\r\n      return !Object.values(this.errores).some((error) => error);\r\n    },\r\n    \r\n    loginSend: async function () {\r\n      if (this.validarCampos()) {\r\n        try {\r\n          const response = await this.post({\r\n            url: `${this.url}/user/login`,\r\n            params: this.login,\r\n          });\r\n\r\n          if (response.state === 200) {\r\n            console.log(response);\r\n            this.showUserError = false;\r\n            this.showOtherError = false;\r\n            this.userErrorMessage = '';\r\n            this.otherErrorMessage = '';\r\n            if (response.user.usu_rol == 'ABOGADO') {\r\n              this.$store.commit('mt_set_aboid', response.user.abo_id);\r\n            }\r\n            this.$store.commit('mt_set_user', response.user);\r\n            this.$router.push({ path: '/sisge' });\r\n          } else {\r\n            this.showUserError = true;\r\n            this.showOtherError = false;\r\n            this.userErrorMessage = 'Usuario o contraseña incorrectos.';\r\n            console.log(this.userErrorMessage);\r\n          }\r\n        } catch (error) {\r\n          this.showUserError = false;\r\n          this.showOtherError = true;\r\n          this.otherErrorMessage = `Error al iniciar sesión: ${error.message}`;\r\n          console.log(this.otherErrorMessage);\r\n        }\r\n      } else {\r\n        console.log('error');\r\n      }\r\n    },\r\n\r\n    // loginSend() {\r\n    //   if (this.validarCampos()) {\r\n    //     this.loader = true;\r\n    //     axios.post(this.$store.getters.get__url + '/user/login',\r\n    //       this.login,\r\n    //       {\r\n    //         headers: {\r\n    //           // Authorization : `Bearer ${this.$store.getters.get__token}`\r\n    //         }\r\n    //       }\r\n    //     )\r\n    //       .then(response => {\r\n    //         if (response.data.state === 200) {\r\n    //           this.loader = false;\r\n    //           if (response.data.user.usu_rol == 'ABOGADO') {\r\n    //             this.$store.commit('mt_set_aboid', response.data.user.abo_id);\r\n    //           }\r\n    //           this.$store.commit('mt_set_user', response.data.user);\r\n    //           this.$router.push({ path: '/sisge' });\r\n    //         } else {\r\n    //           this.showUserError = true;\r\n    //           this.showOtherError = false;\r\n    //           this.userErrorMessage = 'Usuario o contraseña incorrectos.';\r\n    //         }\r\n    //       })\r\n    //       .catch(error => {\r\n    //         this.showUserError = false;\r\n    //         this.otherErrorMessage = `Error al iniciar sesión: ${error.message}`;\r\n    //       });\r\n    //   } else {\r\n    //     // Manejar lo que necesites hacer si los campos no son válidos\r\n    //   }\r\n    // },\r\n\r\n  },\r\n  mounted() {\r\n    this.$refs.emailInput.focus();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.has-error {\r\n  border: 1px solid #EA4D4D;\r\n}\r\n\r\n.error-message {\r\n  padding-left: 15px;\r\n  color: #EA4D4D;\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=2c3d67d9&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=2c3d67d9&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c3d67d9\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","loader","expression","attrs","require","showUserError","_v","_s","userErrorMessage","on","$event","preventDefault","loginSend","apply","arguments","login","ref","class","errores","domProps","target","composing","$set","mensajes","email","_e","password","type","indexOf","_k","keyCode","key","staticRenderFns","components","Loader","data","url","showOtherError","otherErrorMessage","created","$store","getters","get__url","methods","mapActions","validateEmail","emailRegex","test","validarCorreo","validarCampo","campo","propiedadError","validarUser","validarPassword","validarCampos","Object","values","some","error","response","post","params","state","console","log","user","usu_rol","commit","abo_id","$router","push","path","message","mounted","$refs","emailInput","focus","component"],"sourceRoot":""}