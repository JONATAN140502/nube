"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[6954],{96954:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var r=function(){var e=this,a=e._self._c;return a("section",{staticClass:"pc-container pb-4"},[a("div",{staticClass:"pcoded-content"},[a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-xl-12"},[a("h5",{staticClass:"text-dark fw-bold"},[a("button",{staticClass:"btn btn-sm mr-2 btn-primary",on:{click:e.goBack}},[a("i",{attrs:{"data-feather":"arrow-left"}})]),e._v("Registro de Nuevo Expediente ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card shadow rounded"},[e._m(0),a("div",{staticClass:"card-body mb-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("N° de Expediente")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_number,expression:"datosgenerales.tra_number"}],staticClass:"form-control",class:{"has-error":e.errores.tra_number},attrs:{type:"text",placeholder:"0001-2024-OAJ"},domProps:{value:e.datosgenerales.tra_number},on:{input:[function(a){a.target.composing||e.$set(e.datosgenerales,"tra_number",a.target.value)},function(a){return e.validarCampo("tra_number")}]}}),e.errores.tra_number?a("span",{staticClass:"error-message"},[e._v("Ingrese un numero de expediente.")]):e._e()])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Nombre del Exp.")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_name,expression:"datosgenerales.tra_name"}],staticClass:"form-control",class:{"has-error":e.errores.tra_name},attrs:{type:"text"},domProps:{value:e.datosgenerales.tra_name},on:{input:[function(a){a.target.composing||e.$set(e.datosgenerales,"tra_name",a.target.value)},function(a){return e.validarCampo("tra_name")}]}}),e.errores.tra_name?a("span",{staticClass:"error-message"},[e._v("Ingrese el nombre del expediente.")]):e._e()])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Asunto")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_matter,expression:"datosgenerales.tra_matter"}],staticClass:"form-control",class:{"has-error":e.errores.tra_matter},attrs:{type:"text"},domProps:{value:e.datosgenerales.tra_matter},on:{input:[function(a){a.target.composing||e.$set(e.datosgenerales,"tra_matter",a.target.value)},function(a){return e.validarCampo("tra_matter")}]}}),e.errores.tra_matter?a("span",{staticClass:"error-message"},[e._v("Ingrese un asunto de oficio")]):e._e()])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Fecha de llegada")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_arrival_date,expression:"datosgenerales.tra_arrival_date"}],staticClass:"form-control",class:{"has-error":e.errores.tra_arrival_date},attrs:{type:"date"},domProps:{value:e.datosgenerales.tra_arrival_date},on:{input:[function(a){a.target.composing||e.$set(e.datosgenerales,"tra_arrival_date",a.target.value)},function(a){return e.validarCampo("tra_arrival_date")}]}}),e.errores.tra_arrival_date?a("span",{staticClass:"error-message"},[e._v("Ingrese una fecha de llegada.")]):e._e()])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v(" Responsable ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_abogado,expression:"datosgenerales.tra_abogado"}],staticClass:"form-control",class:{"has-error":e.errores.tra_abogado},on:{change:[function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.datosgenerales,"tra_abogado",a.target.multiple?t:t[0])},function(a){return e.validarCampo("tra_abogado")}]}},[a("option",{staticClass:"py-5",attrs:{value:"",disabled:"",selected:""}},[e._v("-- Seleccione una opción ")]),e._l(e.abogados,(function(t,r){return a("option",{key:r,staticClass:"py-3",domProps:{value:t.abo_id}},[e._v(" "+e._s(t.nat_nombres)+" "+e._s(t.nat_apellido_paterno)+" "+e._s(t.nat_apellido_materno)+" ")])}))],2),e.errores.tra_abogado?a("span",{staticClass:"error-message"},[e._v("Asigne un abogado")]):e._e()])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Oficina de origen")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_area,expression:"datosgenerales.tra_area"}],staticClass:"form-control",class:{"has-error":e.errores.tra_area},on:{change:[function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.datosgenerales,"tra_area",a.target.multiple?t:t[0])},function(a){return e.validarCampo("tra_area")}]}},[a("option",{staticClass:"py-5",attrs:{value:"",disabled:"",selected:""}},[e._v("-- Seleccione una opción ")]),e._l(e.areas,(function(t){return a("option",{key:t.are_id,staticClass:"py-3",domProps:{value:t.are_id}},[e._v(" "+e._s(t.are_name)+" ")])}))],2),e.errores.tra_area?a("span",{staticClass:"error-message"},[e._v("Seleccione una Ocifina de origen.")]):e._e()])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Tipo de referencia")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_type_ref,expression:"datosgenerales.tra_type_ref"}],staticClass:"form-control",class:{"has-error":e.errores.tra_type_ref},on:{change:[function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.datosgenerales,"tra_type_ref",a.target.multiple?t:t[0])},function(a){return e.validarCampo("tra_type_ref")}]}},e._l(e.type_references,(function(t,r){return a("option",{key:t.type_id,domProps:{value:t.type_id,selected:0===r}},[e._v(" "+e._s(t.type_name)+" ")])})),0),e.errores.tra_type_ref?a("span",{staticClass:"error-message"},[e._v("Seleccione un Tipo de referencia.")]):e._e()])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Expediente de recepción (opcional)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_exp_ext,expression:"datosgenerales.tra_exp_ext"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.datosgenerales.tra_exp_ext},on:{input:function(a){a.target.composing||e.$set(e.datosgenerales,"tra_exp_ext",a.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label"},[e._v("Documento de recepción (opcional)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.datosgenerales.tra_doc_recep,expression:"datosgenerales.tra_doc_recep"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.datosgenerales.tra_doc_recep},on:{input:function(a){a.target.composing||e.$set(e.datosgenerales,"tra_doc_recep",a.target.value)}}})])])]),a("div",{staticClass:"row py-3"},[a("div",{staticClass:"col-md-12 d-flex justify-content-end"},[a("button",{staticClass:"btn btn-primary btn-lg rounded",attrs:{type:"button"},on:{click:e.guardar}},[e._v(" Guardar "),a("i",{attrs:{"data-feather":"arrow-right"}})])])])])])])])])])},s=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"card-header"},[a("div",{staticClass:"row d-flex align-items-center"},[a("div",{staticClass:"col-lg-6 col-md-auto col-sm-12"},[a("h5",[e._v("Datos Generales")])])])])}],o=(t(44114),t(90740)),l=t.n(o),i=t(34061),n=(t(11530),t(4874),{name:"RegistroGeneral",props:{exp:{}},data(){return{trade:null}},created(){this.listarAreas(),this.listarTypesRef(),this.listarAbogados()},mounted(){this.$nextTick((()=>{l().replace()}))},data(){return{areas:[],type_references:[],abogados:[],tra_person:!1,datosgenerales:{tra_number:"",tra_name:"",tra_exp_ext:"",tra_doc_recep:"",tra_area:"",tra_type_ref:"",tra_matter:"",tra_arrival_date:this.getCurrentDate(),tra_state_law:"P",tra_abogado:"",anio:(new Date).getFullYear()},errores:{tra_number:!1,tra_name:!1,tra_area:!1,tra_type_ref:!1,tra_matter:!1,tra_arrival_date:!1,tra_abogado:!1}}},methods:{async listarAreas(){this.$showLoadingAlert();try{const e=await this.$getData("trade/nextTraNumber",this);this.datosgenerales.tra_number=e.nextTraNumber;const a=await(0,i.bQ)("area",this);this.areas=a.data}catch(e){this.$handleApiError(e,"listar areas")}},async listarTypesRef(){try{const e=await(0,i.bQ)("type_reference",this);this.type_references=e.data,this.type_references.length>0&&(this.datosgenerales.tra_type_ref=this.type_references[0].type_id)}catch(e){this.$handleApiError(e,"listar tipos de referencia")}},async listarAbogados(){try{const e=await(0,i.bQ)("lawyer",this);this.abogados=e.data}catch(e){this.$handleApiError(e,"listar abogados")}finally{this.$closeLoadingAlert()}},async guardar(){if(this.validarCampos()){const a=await this.$getData("trade/nextTraNumber",this);this.datosgenerales.tra_number=a.nextTraNumber;const t=this.areas.find((e=>e.are_id===this.datosgenerales.tra_area));try{this.loader=!0;const e={tra_number:this.datosgenerales.tra_number,tra_name:this.datosgenerales.tra_name,tra_exp_ext:this.datosgenerales.tra_exp_ext,tra_doc_recep:this.datosgenerales.tra_doc_recep,tra_matter:this.datosgenerales.tra_matter,tra_arrival_date:this.datosgenerales.tra_arrival_date,tra_state_law:this.datosgenerales.tra_state_law,tra_ubication:t.are_name,tra_type_id:this.datosgenerales.tra_type_ref,tra_are_id:this.datosgenerales.tra_area,tra_abo_id:this.datosgenerales.tra_abogado,anio:this.datosgenerales.anio},a=await this.$postData("trade/create",this,e);"success"===a.state&&(this.trade=a.data,this.$router.push({name:"oficio/detalle",params:{id:this.trade.tra_id}}),this.loader=!1)}catch(e){console.error("Error en la función guardar:",e),e.response?console.error("Respuesta del servidor:",e.response.data):e.message&&console.error("Mensaje de error:",e.message),this.$handleApiError(e,"crear oficio")}}else console.log("error")},getCurrentDate(){return(new Date).toISOString().split("T")[0]},validarCampo(e){this.errores[e]=""===this.datosgenerales[e]},validarCampos(){return Object.keys(this.errores).forEach((e=>{this.validarCampo(e,e)})),!Object.values(this.errores).some((e=>e))},goBack(){"ABOGADO"===this.$store.getters.get__user.usu_rol?this.$router.push({path:"/oficio/asignados"}):this.$router.go(-1)}}}),d=n,c=t(81656),_=(0,c.A)(d,r,s,!1,null,"3f44ab9a",null),m=_.exports}}]);
//# sourceMappingURL=6954.beb40b61.js.map