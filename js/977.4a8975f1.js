"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[977],{85977:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"pc-container mb-4"},[e("div",{staticClass:"pcoded-content"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"page-block"},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col-md-6"},[t._m(0),e("ul",{staticClass:"breadcrumb"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:"/sisge"}},[t._v("Inicio")])],1),e("li",{staticClass:"breadcrumb-item"},[t._v("Expedientes")]),e("li",{staticClass:"breadcrumb-item"},[t._v("Añadir Archivos")])])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card shadow"},[e("div",{staticClass:"card-header border-0 mb-0"},[e("div",{staticClass:"row tabs"},[e("div",{staticClass:"col-md-auto tabs-div"},[e("a",{staticClass:"btn btn-lg tabs-link",class:{active:!0===t.showEscrito},attrs:{href:"javascript:void(0)"},on:{click:t.mostrarEscrito}},[t._v("Añadir Escrito")])]),e("div",{staticClass:"col-md-auto tabs-div"},[e("a",{staticClass:"btn btn-lg tabs-link",class:{active:!0===t.showEje},attrs:{href:"javascript:void(0)"},on:{click:t.mostrarEje}},[t._v("Añadir Archivo EJE")])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.showEscrito,expression:"showEscrito === true"}]},[e("div",{staticClass:"card-body py-0 my-0"},[t._m(1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[t._v("N° Expediente")]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expediente,expression:"expediente"}],staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:t.expediente},on:{input:function(e){e.target.composing||(t.expediente=e.target.value)}}})])])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[t._v("Demandante")]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.demandante,expression:"demandante"}],staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:t.demandante},on:{input:function(e){e.target.composing||(t.demandante=e.target.value)}}})])])])])]),e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group mb-0"},[e("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Seleccionar Archivo")]),e("input",{ref:"fileInput",staticClass:"form-control",class:{"has-error":t.errores.file_escrito},attrs:{type:"file",required:""},on:{change:t.onFileChange}})]),t.errores.file_escrito?t._e():e("span",{staticClass:"message"},[t._v("Archivos aceptados: word, pdf.")]),t.errores.file_escrito?e("span",{staticClass:"error-message"},[t._v("Debe cargar un archivo.")]):t._e()])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Descripción o detalles sobre los escritos")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.escrito.descripcion,expression:"escrito.descripcion"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.escrito.descripcion},on:{input:function(e){e.target.composing||t.$set(t.escrito,"descripcion",e.target.value)}}})])])])]),e("div",{staticClass:"card-footer border-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"d-flex"},[e("button",{staticClass:"btn btn-lg btn-secondary px-3",on:{click:t.goBack}},[e("i",{attrs:{"data-feather":"arrow-left"}}),t._v(" Volver atrás ")]),e("button",{staticClass:"btn btn-lg btn-primary ml-auto px-3",on:{click:t.guardarEscrito}},[e("i",{attrs:{"data-feather":"save"}}),t._v(" Guardar Escrito ")])])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.showEje,expression:"showEje === true"}]},[0==t.dataeje.length?e("div",[e("div",{staticClass:"card-body py-0 my-0"},[t._m(2),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[t._v("N° Expediente")]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expediente,expression:"expediente"}],staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:t.expediente},on:{input:function(e){e.target.composing||(t.expediente=e.target.value)}}})])])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[t._v("Demandante")]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.demandante,expression:"demandante"}],staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:t.demandante},on:{input:function(e){e.target.composing||(t.demandante=e.target.value)}}})])])])])]),e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group mb-0"},[e("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Seleccionar Archivo")]),e("input",{ref:"fileInput",staticClass:"form-control",class:{"has-error":t.errores.file_eje},attrs:{type:"file",requeried:""},on:{change:t.onFileChange}})]),t.errores.file_eje?e("span",{staticClass:"error-message"},[t._v("Debe cargar un archivo.")]):e("span",{staticClass:"message"},[t._v("Archivos aceptados: word, pdf.")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Descripción o detalles sobre el archivo EJE")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.EJE.descripcion,expression:"EJE.descripcion"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.EJE.descripcion},on:{input:function(e){e.target.composing||t.$set(t.EJE,"descripcion",e.target.value)}}})])])])]),e("div",{staticClass:"card-footer border-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"d-flex"},[e("button",{staticClass:"btn btn-lg btn-secondary px-3",on:{click:t.goBack}},[e("i",{attrs:{"data-feather":"arrow-left"}}),t._v(" Volver atras ")]),e("button",{staticClass:"btn btn-lg btn-primary ml-auto px-3",on:{click:function(e){return t.GuardarEJE()}}},[e("i",{attrs:{"data-feather":"save"}}),t._v(" Guardar archivo EJE")])])])])]):e("div",{staticClass:"text center"},[e("div",{staticClass:"card-footer border-0"},[t._m(3),e("div",{staticClass:"row"},[e("div",{staticClass:"d-flex"},[e("button",{staticClass:"btn btn-lg btn-secondary px-3",on:{click:t.goBack}},[e("i",{attrs:{"data-feather":"arrow-left"}}),t._v(" Volver atras ")]),e("router-link",{staticClass:"ml-auto px-3",attrs:{to:{name:"expediente/detalle",params:{id:t.EJE.exp_id}}}},[e("button",{staticClass:"btn btn-lg btn-primary"},[e("i",{attrs:{"data-feather":"save"}}),t._v(" Ir a Detalle ")])])],1)])])])])])])])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-header-title"},[e("h5",{staticClass:"m-b-10"},[t._v("Archivos")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mb-3 mt-0"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"badge bg-light-primary w-100 rounded py-3 px-4 d-flex text-start",staticStyle:{"font-size":"12px"}},[t._v(" Datos para añadir un nuevo escrito al Expediente ")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mb-3 mt-0"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"badge bg-light-primary w-100 rounded py-3 px-4 d-flex text-start",staticStyle:{"font-size":"12px"}},[t._v(" Datos para modificar el archivo EJE del Expediente ")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mb-3 mt-0"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"badge bg-light-primary w-100 rounded py-3 px-4 d-flex text-start",staticStyle:{"font-size":"16px"}},[t._v(" El Expediente ya tiene Registrado un Archivo EJE,puede visualizar o Modificar en Detalle del Expediente. ")])])])}],r=(s(57658),s(44161)),o=s(63822),l=s(98164),c=s.n(l),d=(s(42492),{props:["id"],data(){return{selectedFile:null,escrito:{exp_id:"",doc_tipo:"ESCRITO",descripcion:""},EJE:{exp_id:"",doc_tipo:"EJE",descripcion:""},expediente:null,demandante:null,errores:{file_escrito:!1,file_eje:!1},showEscrito:!1,showEje:!1,archivoSeleccionado:!1,dataeje:[]}},created(){this.buscar(),this.mostrarEscrito()},mounted(){this.$nextTick((()=>{c().replace()}))},methods:{...(0,o.nv)(["get","post"]),mostrarEscrito(){this.showEscrito=!0,this.showEje=!1},mostrarEje(){this.showEscrito=!1,this.showEje=!0},onFileChange(t){this.selectedFile=t.target.files[0];const e=t.target;this.archivoSeleccionado=e.files.length>0,this.errores.file_escrito=!1,this.errores.file_eje=!1},validarFileEscrito(){return this.archivoSeleccionado?(this.errores.file_escrito=!0,!0):(this.errores.file_escrito=!1,!1)},validarFileEje(){const t=this.$refs.fileInput;return t.files&&0!==t.files.length?(this.errores.file_eje=!1,!1):(this.errores.file_eje=!0,!0)},async buscar(){try{const t=await this.get({url:`${this.$store.getters.get__url}/proceeding/${this.$route.params.id}`,token:this.$store.getters.get__token});console.log(t),this.expediente=t.data.exp_numero,"Natural"===t.data.tipo_persona?this.demandante=`${t.data.nat_apellido_paterno} ${t.data.nat_apellido_materno} ${t.data.nat_nombres}`:this.demandante=t.data.jur_razon_social,this.escrito.exp_id=t.data.exp_id,this.EJE.exp_id=t.data.exp_id,this.dataeje=t.eje}catch(t){console.log(t)}},async guardarEscrito(){if(this.archivoSeleccionado){console.info("Carga correcta del archivo escrito."),this.errores.file_escrito=!1;const e=new FormData;e.append("file",this.selectedFile);try{await r.Z.post(`${this.$store.getters.get__url}/cargar/archivo`,e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.$store.getters.get__token}`},params:this.escrito}),this.selectedFile=null,this.$router.push({path:"/sisge/expediente/busqueda"})}catch(t){console.error(t)}}else console.log("Falta cargar un archivo."),this.errores.file_escrito=!0},async GuardarEJE(){if(this.archivoSeleccionado){console.info("Carga correcta del archivo eje."),this.errores.file_eje=!1;try{const t=new FormData;t.append("file",this.selectedFile),await r.Z.post(`${this.$store.getters.get__url}/cargar/archivo`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.getters.get__token},params:this.EJE}),this.selectedFile=null,this.$router.push({path:"/sisge/expediente/busqueda"})}catch(t){console.error(t)}}else console.log("Falta cargar un archivo."),this.errores.file_eje=!0},goBack(){this.$router.go(-1)}}}),n=d,p=s(1001),v=(0,p.Z)(n,a,i,!1,null,"17357685",null),m=v.exports}}]);
//# sourceMappingURL=977.4a8975f1.js.map