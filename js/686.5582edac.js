"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[686],{10686:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var a=function(){var e=this,s=e._self._c;return s("section",{staticClass:"pc-container pb-4 px-4"},[s("div",{staticClass:"pcoded-content"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header py-3"},[s("div",{staticClass:"d-flex align-items-center"},[s("h5",[e._v("Lista de Especialidades")]),s("button",{staticClass:"btn btn-success btn-sm px-4 ml-auto rounded-1",on:{click:e.mostrarModal}},[e._v(" Nuevo ")])])]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered",attrs:{id:"miTabla1"}},[e._m(0),s("tbody",e._l(e.especialidades,(function(t,a){return s("tr",{key:t.esp_id},[e._m(1,!0),s("td",[e._v(e._s(t.esp_nombre))]),s("td",{staticClass:"text-center"},[s("a",{staticClass:"text-primary px-2 py-1 btn-lg mx-1",attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.editar(t.esp_id)}}},[e._m(2,!0)]),s("a",{staticClass:"px-2 py-1 btn-lg text-danger",attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.borrar(t.esp_id)}}},[e._m(3,!0)])])])})),0)])])])]),e.showModal?s("div",{staticClass:"modal",on:{click:e.cerrarModal}},[s("div",{staticClass:"modal-content card border-0",on:{click:function(e){e.stopPropagation()}}},[s("div",{staticClass:"card-header"},[s("h5",{staticClass:"text-center"},[e._v(" "+e._s(e.especialidad.esp_id?"Actualizar especialidad":"Registar Nueva especialidad")+" ")])]),s("div",{staticClass:"card-body mb-0 pb-0"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[e._v("Nombre")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.especialidad.esp_nombre,expression:"especialidad.esp_nombre"}],staticClass:"form-control",class:{"has-error":e.errores.esp_nombre},domProps:{value:e.especialidad.esp_nombre},on:{blur:e.validarNombre,input:[function(s){s.target.composing||e.$set(e.especialidad,"esp_nombre",s.target.value)},function(s){e.errores.esp_nombre=!1}],keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.guardar.apply(null,arguments)}}}),e.errores.esp_nombre?s("span",{staticClass:"error-message"},[e._v("Ingrese un nombre de Especialidad.")]):e._e()])])])]),s("div",{staticClass:"card-footer border-0 mt-0 pt-0"},[s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-secondary btn-lg px-4 mx-2 rounded",on:{click:e.cerrarModal}},[e._v("Cerrar")]),s("button",{staticClass:"btn btn-primary btn-lg px-4 rounded",on:{click:e.guardar}},[e._v(" "+e._s(e.especialidad.esp_id?"Actualizar":"Guardar")+" ")])])])])]):e._e()])])},r=[function(){var e=this,s=e._self._c;return s("thead",[s("tr",[s("th",{staticClass:"text-center pl-4 col-lg-2 col-sm-1"},[e._v("#")]),s("th",[e._v("Nombre")]),s("th",{staticClass:"text-center"},[e._v("Opciones")])])])},function(){var e=this,s=e._self._c;return s("td",{staticClass:"text-center py-2 my-0"},[s("input",{staticClass:"form-check-input me-1",attrs:{type:"checkbox",value:""}})])},function(){var e=this,s=e._self._c;return s("span",{},[s("i",{attrs:{"data-feather":"edit"}})])},function(){var e=this,s=e._self._c;return s("span",[s("i",{attrs:{"data-feather":"trash"}})])}],i=t(98164),o=t.n(i),l=t(77387),c=t.n(l),d=(t(50563),t(22619),t(63822)),n={name:"djudiciales",created(){this.leer()},mounted(){this.$nextTick((()=>{o().replace()}))},data(){return{dataTable:null,showModal:!1,especialidades:[],especialidad:{esp_id:"",esp_nombre:""},errores:{esp_nombre:!1}}},methods:{...(0,d.nv)(["get","post"]),validarCampo(e,s){""===this.especialidad[e]?this.errores[s]=!0:this.errores[s]=!1},validarNombre(){this.especialidad.esp_nombre=this.especialidad.esp_nombre,this.validarCampo("esp_nombre","esp_nombre")},validarCampos(){return this.validarNombre(),!Object.values(this.errores).some((e=>e))},async leer(){try{const e=await this.get({url:this.$store.getters.get__url+"/specialty",token:this.$store.getters.get__token});this.especialidades=e.data,this.initDataTable()}catch(e){console.error("Error al cargar especialidades:",e)}},async crear(){if(this.validarCampos())try{const e=await this.post({url:`${this.$store.getters.get__url}/specialty/store`,token:this.$store.getters.get__token,params:{esp_nombre:this.especialidad.esp_nombre}});0===e.state?(await this.leer(),this.showModal=!1,this.especialidad.esp_id="",this.especialidad.esp_nombre="",console.info("especialidad creada correctamente")):console.error("Error en la respuesta del servidor:",e.message)}catch(e){console.error("Error en la solicitud:",e)}else console.error("Falta completar los campos del registro.")},async actualizar(e){if(this.validarCampos())try{const s=await this.post({url:this.$store.getters.get__url+"/specialty/update",token:this.$store.getters.get__token,params:{esp_id:e,esp_nombre:this.especialidad.esp_nombre}});0==s.state?(await this.leer(),this.showModal=!1,this.especialidad.esp_id="",this.especialidad.esp_nombre=""):console.log("error")}catch(s){console.error(s)}else console.error("Falta completar los campos del registro.")},async borrar(e){try{const s=await this.post({url:this.$store.getters.get__url+"/specialty/destroy",token:this.$store.getters.get__token,params:{esp_id:e}});0==s.state?await this.leer():console.log("error")}catch(s){console.error(s)}},editar(e){const s=this.especialidades.find((s=>s.esp_id===e));s?(this.especialidad={...s},this.showModal=!0):console.error("especialidad no encontrada")},guardar(){try{this.especialidad.esp_id?this.actualizar(this.especialidad.esp_id):this.crear()}catch(e){console.error(e)}},initDataTable(){this.dataTable&&this.dataTable.destroy(),this.$nextTick((()=>{this.dataTable=c()("#miTabla1").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}}),o().replace()}))},mostrarModal(){this.showModal=!0},cerrarModal(){this.showModal=!1,this.errores.esp_nombre=!1,this.especialidad.esp_id="",this.especialidad.esp_nombre=""}}},p=n,h=t(1001),u=(0,h.Z)(p,a,r,!1,null,"2926e742",null),_=u.exports}}]);
//# sourceMappingURL=686.5582edac.js.map