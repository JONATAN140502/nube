"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[5134],{85134:function(t,s,a){a.r(s),a.d(s,{default:function(){return z}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pc-container pb-4"},[s("div",{staticClass:"pcoded-content"},[s("div",{staticClass:"row mb-4"},[s("h5",{},[s("button",{staticClass:"btn btn-sm mr-2 btn-secondary",on:{click:t.goBack}},[s("i",{attrs:{"data-feather":"arrow-left"}})]),s("span",{staticClass:"text-primary"},[t._v("Expediente administrativo")]),t._v(" | "),s("span",{staticClass:"text-secondary"},[t._v(" "+t._s(t.trade?t.trade.tra_number:"---"))])])]),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-md-2"},[s("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"1"===t.isVista},attrs:{type:"button"},on:{click:function(s){return t.selectVista("1")}}},[t._v(" Datos ")])]),s("div",{staticClass:"col-md-2"},[s("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"2"===t.isVista},attrs:{type:"button"},on:{click:function(s){return t.selectVista("2")}}},[t._v(" Archivos ")])]),s("div",{staticClass:"col-md-2"},[t.showOption("SECRETARIA")?s("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"3"===t.isVista},attrs:{type:"button"},on:{click:function(s){return t.selectVista("3")}}},[t._v(" Historial ")]):t._e(),t.showOption("ABOGADO","ASISTENTE")?s("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"3"===t.isVista},attrs:{type:"button"},on:{click:function(s){return t.selectVista("3")}}},[t._v(" Solicitudes ")]):t._e()]),s("div",{staticClass:"col-md-2"},[s("button",{staticClass:"btn btn-outline-primary w-100",attrs:{type:"button"},on:{click:function(s){return t.redirectActualizar()}}},[t._v("Actualizar")])])]),t.trade?s("div",["1"===t.isVista?s("General",{attrs:{id:t.trade.tra_id}}):"2"===t.isVista?s("Archivos",{attrs:{id:t.trade.tra_id}}):"3"===t.isVista&&t.showOption("SECRETARIA")?s("Historial",{attrs:{id:t.trade.tra_id}}):"3"===t.isVista&&t.showOption("ABOGADO","ASISTENTE")?s("Solicitud",{attrs:{id:t.trade.tra_id}}):t._e()],1):t._e()])])},e=[],r=(a(44114),a(95353)),o=a(91250),l=a(59911),c=a.n(l),n=(a(1972),function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"card"},[t._m(0),t.trade&&t.trade.tra_id?s("div",[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row py-2"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4 fw-bold"},[t._v(" Expediente N° ")]),s("div",{staticClass:"col-xl-7 col-sm-8 fw-bold"},[t._v(" : "+t._s(t.trade.tra_number)+" ")])])])]),s("div",{staticClass:"row py-2"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Nombre ")]),s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.trade.tra_name)+" ")])])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Asunto ")]),s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.trade.tra_matter)+" ")])])])]),s("div",{staticClass:"row py-2"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Fecha de llegada ")]),s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.trade.tra_arrival_date)+" ")])])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Oficina de origen ")]),s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.trade.area.are_name)+" ")])])])]),s("div",{staticClass:"row py-2"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Estado ")]),"P"===t.trade.tra_state_law?s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : Pendiente ")]):s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : Finalizado ")])])]),t._m(1)]),s("div",{staticClass:"row py-2"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Expediente de recepción ")]),null!=t.trade.tra_number_ext?s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.trade.tra_number_ext)+" ")]):s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : No se registro ")])])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Oficio de recepción ")]),null!=t.trade.tra_doc_recep?s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.trade.tra_doc_recep)+" ")]):s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : No se registró ")])])])])])]):t._e()])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"card"},[t._m(2),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{ref:"myDataTable",staticClass:"table table-hover",attrs:{id:"table"}},[t._m(3),s("tbody",t._l(t.persons,(function(a){return s("tr",{key:a.per_id},[s("td",[t._v(t._s(a.nat_dni))]),s("td",[t._v(t._s(a.nat_nombres))]),s("td",[t._v(t._s(a.nat_correo||"---"))]),s("td",[t._v(t._s(a.nat_telefono||"---"))])])})),0)])])])])])])])}),d=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[t._v("Datos Generales")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Estado ")]),s("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : DATA ")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[t._v("Responsables")])])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",[t._v("DNI")]),s("th",[t._v("Nombres")]),s("th",[t._v("Correo")]),s("th",[t._v("Teléfono")])])])}],h=a(2637),v=a(95093),_=a.n(v),u={mixins:[h.A],data(){return{dataTable:null,trade:null,persons:[],formattedDate:"",id:""}},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesOficio()},created(){this.sector=this.$store.getters.get__sector,this.id=this.$route.params.id},methods:{async cargarDetallesOficio(){try{const t=await this.$getData(`trade/${this.id}`,this);this.trade=t.trade,await this.$waitForDataTableDraw(this,"myDataTable"),this.formatDate(),this.initDataTable(),this.$closeLoadingAlert()}catch(t){this.$handleApiError(t,"cargar detalles del expediente administrativo ",this.id)}},formatDate(){this.formattedDate=_()(this.trade.tra_arrival_date).format("DD MMM YYYY")},goBack(){this.$router.go(-1)}}},b=u,m=a(81656),p=(0,m.A)(b,n,d,!1,null,null,null),C=p.exports,f=function(){var t=this;t._self._c;return t._m(0)},g=[function(){var t=this,s=t._self._c;return s("div",[s("h1",[t._v("Archivos")])])}],y={name:"ArchivosOficio"},x=y,w=(0,m.A)(x,f,g,!1,null,null,null),D=w.exports,$=function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"card"},[t._m(0),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{ref:"myDataTable",staticClass:"table table-hover",attrs:{id:"table"}},[t._m(1),s("tbody",t._l(t.trade.observations,(function(a,i){return s("tr",{key:a.obs_id},[s("td",[t._v(t._s(i+1))]),s("td",[t._v(t._s(a.obs_title))]),s("td",[t._v(t._s(a.obs_description))]),s("td",{staticClass:"text-center"},[t._v(t._s(t.formattedDate))]),t._m(2,!0)])})),0)])])])])])])},A=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[t._v("Observaciones")])])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",[t._v("#")]),s("th",[t._v("Título")]),s("th",[t._v("Descripción")]),s("th",[t._v("Fecha")]),s("th",[t._v("Opciones")])])])},function(){var t=this,s=t._self._c;return s("td",[s("div",{staticClass:"d-flex justify-content-center"},[s("button",{staticClass:"btn btn-info btn-sm mr-1",attrs:{type:"button"}},[t._v("Reenviar")]),s("button",{staticClass:"btn btn-info btn-sm mr-1",attrs:{type:"button"}},[t._v("Remitir")]),s("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"}},[t._v("Ver")])])])}],T={mixins:[h.A],data(){return{dataTable:null,trade:null,formattedDate:"",id:""}},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesOficio()},created(){this.sector=this.$store.getters.get__sector,this.id=this.$route.params.id},methods:{async cargarDetallesOficio(){try{const t=await this.$getData(`trade/${this.id}`,this);this.trade=t.trade,await this.$waitForDataTableDraw(this,"myDataTable"),this.formatDate(),this.initDataTable(),this.$closeLoadingAlert()}catch(t){this.$handleApiError(t,"cargar detalles del expediente administrativo ",this.id)}},formatDate(){this.formattedDate=_()(this.trade.observations.created_at).format("DD MMM YYYY")},goBack(){this.$router.go(-1)}}},k=T,O=(0,m.A)(k,$,A,!1,null,null,null),E=O.exports,M=function(){var t=this,s=t._self._c;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header d-flex justify-content-between align-items-center"},[s("h5",{staticClass:"card-title"},[t._v("Realizar solicitudes")]),s("button",{staticClass:"btn btn-primary btn-lg ml-auto rounded",on:{click:t.mostrarModal}},[t._v(" Registrar Solicitud ")])]),t.showModal?s("div",{staticClass:"modal",on:{click:t.cerrarModal}},[s("div",{staticClass:"modal-content card border-0",on:{click:function(t){t.stopPropagation()}}},[t._m(0),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Asunto")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.obsertation.obs_title,expression:"obsertation.obs_title"}],staticClass:"form-control",class:{"has-error":t.errores.obs_title},attrs:{maxlength:"50"},domProps:{value:t.obsertation.obs_title},on:{input:[function(s){s.target.composing||t.$set(t.obsertation,"obs_title",s.target.value)},function(s){return t.validarCampo("obs_title")}]}}),t.errores.obs_title?s("span",{staticClass:"error-message"},[t._v("Complete este campo para continuar.")]):t._e()])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Mensaje")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.obsertation.obs_description,expression:"obsertation.obs_description"}],staticClass:"form-control",class:{"has-error":t.errores.obs_description},attrs:{rows:"4"},domProps:{value:t.obsertation.obs_description},on:{input:[function(s){s.target.composing||t.$set(t.obsertation,"obs_description",s.target.value)},function(s){return t.validarCampo("obs_description")}]}}),t.errores.obs_description?s("span",{staticClass:"error-message"},[t._v("Complete este campo para continuar.")]):t._e()])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn btn-secondary btn-lg mx-2 px-4 rounded",on:{click:t.cerrarModal}},[t._v("Cerrar")]),s("button",{staticClass:"btn btn-primary btn-lg rounded px-4",on:{click:t.guardar}},[t.isLoading?s("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):s("span",[t._v(t._s(t.obsertation.obs_id?"Actualizar":"Guardar"))])])])])])])]):t._e(),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{ref:"myDataTable",staticClass:"table table-hover",attrs:{id:"table"}},[t._m(1),s("tbody",t._l(t.observations,(function(a,i){return s("tr",{key:a.obs_id},[s("td",[t._v(t._s(i+1))]),s("td",[t._v(t._s(a.obs_title))]),s("td",[t._v(t._s(a.obs_description))]),s("td",[t._v(t._s(t.formattedDate))]),"P"===a.obs_state?s("td",{staticClass:"text-center"},[t._v(" --- ")]):s("td",[t._v(" Con respuesta ")]),s("td",[s("div",{staticClass:"d-flex justify-content-center"},[s("a",{staticClass:"text-dark px-2 py-1 btn-lg mx-1",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.editar(a.obs_id)}}},[t._v("Editar "),t._m(2,!0)]),t._m(3,!0)])])])})),0)])])])])])])},L=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header pt-3 pb-4"},[s("h5",{staticClass:"text-center fw-bold",staticStyle:{"margin-top":"10px !important"}},[t._v(" Complete los campos")])])},function(){var t=this,s=t._self._c;return s("thead",[s("tr",[s("th",[t._v("#")]),s("th",{staticClass:"text-center"},[t._v("Título")]),s("th",{staticClass:"text-center"},[t._v("Descripción")]),s("th",{staticClass:"text-center"},[t._v("Fecha")]),s("th",{staticClass:"text-center"},[t._v("Respuesta")]),s("th",{staticClass:"text-center"},[t._v("Opciones")])])])},function(){var t=this,s=t._self._c;return s("span",{},[s("i",{attrs:{"data-feather":"edit-2"}})])},function(){var t=this,s=t._self._c;return s("a",{staticClass:"px-2 py-1 btn-lg text-danger",attrs:{href:"javascript:void(0)"}},[t._v("Eliminar "),s("span",{},[s("i",{attrs:{"data-feather":"trash"}})])])}],V={mixins:[h.A],data(){return{dataTable:null,trade:null,showModal:!1,modalVisible:!1,persons:[],formattedDate:"",id:"",isLoading:!1,observations:[],obsertation:{obs_title:"",obs_description:""},errores:{obs_title:"",obs_description:""}}},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesOficio()},created(){this.sector=this.$store.getters.get__sector,this.id=this.$route.params.id},methods:{async crear(){if(this.validarCampos())try{this.isLoading=!0;const t={obs_title:this.obsertation.obs_title,obs_description:this.obsertation.obs_description,obs_tra_id:this.trade.tra_id},s=await this.$postData("observation/create",this,t);"success"===s.state?(this.observations.push({...s.data}),this.showModal=!1,this.limpiarCampos(),this.isLoading=!1):"error"===s.state&&(this.isLoading=!1)}catch(t){const s=t.response.message;console.log(s),this.isLoading=!1}else console.log("Error en la validación de campos"),this.isLoading=!1},async cargarDetallesOficio(){try{const t=await this.$getData(`trade/${this.id}`,this);this.trade=t.trade,this.observations=this.trade.observations,await this.$waitForDataTableDraw(this,"myDataTable"),this.formatDate(),this.initDataTable(),this.$closeLoadingAlert()}catch(t){this.$handleApiError(t,"cargar detalles del expediente administrativo ",this.id)}},async actualizar(){if(this.validarCampos())try{this.isLoading=!0;const t=await this.$axios.post(`${this.$store.getters.get__url}/observation/update`,this.obsertation,{headers:{Authorization:`Bearer ${this.$store.getters.get__token}`}});0===t.state?(this.limpiarCampos(),this.leer(),this.showModal=!1):(console.error("Error en la respuesta del servidor:",t.data),this.isLoading=!1)}catch(t){console.error("Error en la solicitud:",t.message),this.isLoading=!1}finally{this.isLoading=!1}else console.log("Error en la validación de campos")},validarCampos(){return Object.keys(this.errores).forEach((t=>{this.validarCampo(t,t)})),!Object.values(this.errores).some((t=>t))},editar(t){try{const s=this.observations.find((s=>s.obs_id===t));s?(this.obsertation={...s},this.showModal=!0):console.error("Observación no ENCONTRADO")}catch(s){console.error(s)}},guardar(){try{this.validarCampos()?this.crear():this.actualizar(this.obsertation.obs_id)}catch(t){console.error(t)}},formatDate(){this.formattedDate=_()(this.trade.observations.created_at).format("DD MMM YYYY")},validarCampo(t){this.errores[t]=""===this.obsertation[t]},mostrarModal(){this.showModal=!0},limpiarCampos(){for(let t in this.abogado)this.abogado.hasOwnProperty(t)&&(this.abogado[t]="")},limpiarErrores(){for(let t in this.errores)this.errores.hasOwnProperty(t)&&(this.errores[t]="")},cerrarModal(){this.showModal=!1,this.limpiarCampos(),this.limpiarErrores(),this.isLoading=!1},goBack(){this.$router.go(-1)}}},N=V,S=(0,m.A)(N,M,L,!1,null,"135bc1a0",null),Y=S.exports,R={name:"DetallesOficio",props:["id"],components:{General:C,Archivos:D,Historial:E,Solicitud:Y},data(){return{isVista:"1",dataTable:null,trade:null}},computed:{rol(){return this.$store.getters.get__user.usu_rol}},mounted(){this.cargarDetallesOficio(),this.$nextTick((()=>{c().replace()}))},methods:{...(0,r.i0)(["get","post"]),selectVista(t){this.isVista=t},showOption(...t){return t.includes(this.rol)},async cargarDetallesOficio(){try{this.$showLoadingAlert();const t=await o.A.get(`${this.$store.getters.get__url}/trade/${this.id}`,{headers:{Authorization:`Bearer ${this.$store.getters.get__token}`}});this.trade=t.data.trade,this.$closeLoadingAlert()}catch(t){this.$handleApiError(t,"cargar detalles del expediente administrativo",this.id)}},goBack(){"ABOGADO"===this.$store.getters.get__user.usu_rol?this.$router.push({path:"/oficio/asignados"}):this.$router.push({path:"/oficio/buscar"})}}},j=R,B=(0,m.A)(j,i,e,!1,null,"4d19b47a",null),z=B.exports},2637:function(t,s){s.A={methods:{async initDataTable(){this.destroyDataTable(),await this.$nextTick(),this.dataTable=$(this.$refs.myDataTable).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},destroyDataTable(){this.dataTable&&this.dataTable.destroy()&&(this.dataTable=null)}},beforeDestroy(){this.destroyDataTable()}}}}]);
//# sourceMappingURL=5134.62ba4187.js.map