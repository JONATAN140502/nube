"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[199],{90199:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"pc-container pb-4"},[t("div",{staticClass:"pcoded-content"},[e._m(0),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xl-12"},[t("div",{staticClass:"card shadow"},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 col-sm-12"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[e._v("Abogados con expedientes asignados")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.assignedAttorney,expression:"assignedAttorney"}],staticClass:"form-control fade-transition",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.assignedAttorney=t.target.multiple?a:a[0]},function(t){return e.cargarExpedientes()}]}},[t("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("-- Seleccionar")]),e._l(e.lawyersWithFiles,(function(a){return t("option",{domProps:{value:a.abo_id}},[e._v(" "+e._s(e.completeNames(a))+" ")])}))],2)])]),t("div",{staticClass:"col-md-4 col-sm-12"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[e._v("Nuevo abogado a asignar a los expedientes")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.newlawyer,expression:"newlawyer"}],staticClass:"form-control fade-transition",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.newlawyer=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("-- Seleccionar")]),e._l(e.lawyers,(function(a){return t("option",{domProps:{value:a.abo_id}},[e._v(" "+e._s(e.completeNames(a))+" ")])}))],2)])]),t("div",{staticClass:"col-md-4 col-sm-4",staticStyle:{"margin-top":"27.5px !important"}},[t("div",{staticClass:"d-flex justify-content-end"},[t("button",{staticClass:"btn btn-success px-4 rounded btn-lg",on:{click:e.saveChanges}},[e._v("Guardar")])])])]),0!==e.expedientes.length||e.isLoading?0===e.expedientes.length&&e.isLoading?t("div",{staticClass:"row border-top pt-4 pb-1"},[e._m(2)]):t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table",attrs:{id:"table"}},[e._m(3),t("tbody",e._l(e.expedientes,(function(a,s){return t("tr",{key:s},[t("td",{staticClass:"col-md-2"},[e._v(e._s(a.numero))]),t("td",[e._v(e._s(a.fecha_inicio))]),t("td",[e._v(e._s(e.isDemandante(a.procesal,a.multiple)))]),t("td",[e._v(e._s(e.isDemandado(a.procesal,a.multiple)))]),t("td",[e._v(e._s(a.pretencion))]),t("td",[e._v(e._s(a.materia))]),t("td",{staticClass:"text-center"},[t("span",{class:e.badgeClass(a.estado_proceso)},[e._v(" "+e._s(a.estado_proceso)+" ")])])])})),0)])]):t("div",{staticClass:"row border-top pt-4 pb-1"},[e._m(1)])])])])])])])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row pb-4"},[t("h5",{staticClass:"text-secondary"},[e._v("Modificación en la asignación de abogados a expedientes específicos")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-12"},[t("p",{staticClass:"text-center text-secondary"},[e._v("Seleccione un abogado para visualizar sus expedientes.")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-12 text-center"},[t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),e._v(" Obteniendo expedientes... ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("N° de Expediente")]),t("th",[e._v("Fecha de Inicio")]),t("th",[e._v("Demandante")]),t("th",[e._v("Demandado")]),t("th",[e._v("Pretensión")]),t("th",[e._v("Materia")]),t("th",{staticClass:"text-center"},[e._v("Estado")])])])}],n=a(77387),o=a.n(n),r=a(98164),l=a.n(r),d={name:"abogado",created(){this.loadSelectedOptions(),this.listLawyers(),this.cargarExpedientes()},beforeDestroy(){this.saveSelectedOptions(),this.clearLocalStorage()},mounted(){this.$nextTick((()=>{l().replace()}))},data(){return{dataTable:null,assignedAttorney:"",newlawyer:"",lawyersWithFiles:null,lawyers:null,expedientes:[],isLoading:!1}},methods:{saveSelectedOptions(){localStorage.setItem("assignedAttorney",this.assignedAttorney),localStorage.setItem("newlawyer",this.newlawyer)},loadSelectedOptions(){const e=localStorage.getItem("assignedAttorney"),t=localStorage.getItem("newlawyer");null!==e&&null!==t&&(this.assignedAttorney=e,this.newlawyer=t)},clearLocalStorage(){localStorage.removeItem("assignedAttorney"),localStorage.removeItem("newlawyer")},completeNames(e){return`${e.nat_nombres} ${e.nat_apellido_paterno} ${e.nat_apellido_materno}`},badgeClass(e){return{"badge tramite p-2 rounded":"En Tramite"===e,"badge ejecucion p-2 rounded":"En Ejecucion"===e}},delay(e){return new Promise((t=>setTimeout(t,e)))},isValidSelection(){return"default_value"!==this.assignedAttorney&&"default_value"!==this.newlawyer},async listLawyers(){try{this.$showLoadingAlert();const e=await this.$getData("lawyer",this);this.lawyers=e.data,this.lawyersWithFiles=e.data.filter((e=>e.abo_carga_laboral>0)),this.$closeLoadingAlert()}catch(e){this.$handleApiError(e,"cargar abogados")}},async cargarExpedientes(){try{this.isLoading=!0;const e={abo_id:this.assignedAttorney},t=await this.$postData("lawyer/expedientes",this,e);this.expedientes=t.data,this.initDataTable(),this.saveSelectedOptions(),this.isLoading=!1}catch(e){this.$handleApiError(e,"cargar expedientes")}},async saveChanges(){if(this.isValidSelection())try{this.$showLoadingAlert("","Procesando cambios");const e=this.expedientes.map((e=>e.exp_id)),t={expedientes:e,abogado_actual:this.assignedAttorney,abogado_nuevo:this.newlawyer},a=await this.$postData("lawyer/changeOfLawyer",this,t);0==a.state&&(await this.cargarExpedientes(),this.assignedAttorney="",this.newlawyer="",await this.delay(500),await this.listLawyers(),this.$closeLoadingAlert())}catch(e){this.$handleApiError(e,e.message)}else this.$warnignAlert("","Por favor, selecciona abogados válidos antes de guardar cambios.")},isDemandante(e,t){return"DEMANDANTE"===e[0].tipo_procesal?this.nombreCompleto(e,t):"UNPRG"},isDemandado(e,t){return"DEMANDADO"===e[0].tipo_procesal?this.nombreCompleto(e,t):"UNPRG"},nombreCompleto(e,t){if("1"===t)return"Demanda Colectiva";const a=e[0].tipo_persona,{apellido_paterno:s,apellido_materno:i,nombres:n,razon_social:o}=e[0];return"NATURAL"===a?`${s} ${i} ${n}`:o},initDataTable(){this.dataTable&&this.dataTable.destroy(),this.$nextTick((()=>{this.dataTable=o()("#table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}}),l().replace()}))},isDemandante(e,t){return"DEMANDANTE"===e[0].tipo_procesal?this.nombreCompleto(e,t):"UNPRG"},isDemandado(e,t){return"DEMANDADO"===e[0].tipo_procesal?this.nombreCompleto(e,t):"UNPRG"},nombreCompleto(e,t){if("1"===t)return"Demanda Colectiva";const a=e[0].tipo_persona,{apellido_paterno:s,apellido_materno:i,nombres:n,razon_social:o}=e[0];return"NATURAL"===a?`${s} ${i} ${n}`:o}}},c=d,p=a(1001),u=(0,p.Z)(c,s,i,!1,null,"8b81aa02",null),m=u.exports}}]);
//# sourceMappingURL=199.584821dc.js.map