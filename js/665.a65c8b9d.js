"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[665],{26665:function(a,t,o){o.r(t),o.d(t,{default:function(){return p}});var s=function(){var a=this,t=a._self._c;return t("section",{staticClass:"pc-container pb-4"},[t("div",{staticClass:"pcoded-content"},[a._m(0),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xl-12"},[t("div",{staticClass:"card shadow"},[t("div",{staticClass:"card-header"},[t("div",{staticClass:"d-flex align-items-center"},[t("h5",{staticClass:"text-secondary"},[a._v("Lista de Abogados")]),t("button",{staticClass:"btn btn-primary btn-lg ml-auto rounded",on:{click:a.mostrarModal}},[a._v(" Registrar Nuevo Abogado ")])])]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"table-responsive"},[t("table",{ref:"myDataTable",staticClass:"table",attrs:{id:"table"}},[a._m(1),t("tbody",a._l(a.abogados,(function(o,s){return t("tr",{key:s},[t("td",[a._v(a._s(o.nat_dni))]),t("td",[a._v(a._s(o.nat_nombres))]),t("td",[a._v(a._s(a.nombreCompleto(o)))]),t("td",[a._v(a._s(o.nat_telefono))]),t("td",[a._v(a._s(o.nat_correo))]),t("td",[t("a",{staticClass:"text-primary px-2 py-1 btn-lg mx-1",attrs:{href:"javascript:void(0)"},on:{click:function(t){return a.editar(o.abo_id)}}},[a._m(2,!0)]),t("a",{staticClass:"px-2 py-1 btn-lg text-danger",attrs:{href:"javascript:void(0)"},on:{click:function(t){return a.eliminar(o.abo_id)}}},[a._m(3,!0)])])])})),0)])])])])])]),a.showModal?t("div",{staticClass:"modal",on:{click:a.cerrarModal}},[t("div",{staticClass:"modal-content card border-0",on:{click:function(a){a.stopPropagation()}}},[t("div",{staticClass:"card-header pt-3 pb-4"},[t("h5",{staticClass:"text-center fw-bold",staticStyle:{"margin-top":"10px !important"}},[a._v(" "+a._s(a.abogado.abo_id?"Editar Abogado":"Registrar Nuevo Abogado"))])]),t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("DNI")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.abogado.nat_dni,expression:"abogado.nat_dni"}],staticClass:"form-control",class:{"has-error":a.errores.nat_dni},attrs:{maxlength:"8"},domProps:{value:a.abogado.nat_dni},on:{input:[function(t){t.target.composing||a.$set(a.abogado,"nat_dni",t.target.value)},function(t){return a.validarCampo("nat_dni")}],keypress:a.validarNumeros}}),a.errores.nat_dni?t("span",{staticClass:"error-message"},[a._v("Complete este campo para continuar.")]):a._e()])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("Apellido Paterno")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.abogado.nat_apellido_paterno,expression:"abogado.nat_apellido_paterno"}],staticClass:"form-control",class:{"has-error":a.errores.nat_apellido_paterno},domProps:{value:a.abogado.nat_apellido_paterno},on:{input:[function(t){t.target.composing||a.$set(a.abogado,"nat_apellido_paterno",t.target.value)},function(t){return a.validarCampo("nat_apellido_paterno")}]}}),a.errores.nat_apellido_paterno?t("span",{staticClass:"error-message"},[a._v("Complete este campo para continuar.")]):a._e()])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("Apellido Materno")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.abogado.nat_apellido_materno,expression:"abogado.nat_apellido_materno"}],staticClass:"form-control",class:{"has-error":a.errores.nat_apellido_materno},domProps:{value:a.abogado.nat_apellido_materno},on:{input:[function(t){t.target.composing||a.$set(a.abogado,"nat_apellido_materno",t.target.value)},function(t){return a.validarCampo("nat_apellido_materno")}]}}),a.errores.nat_apellido_materno?t("span",{staticClass:"error-message"},[a._v("Complete este campo para continuar.")]):a._e()])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("Nombres")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.abogado.nat_nombres,expression:"abogado.nat_nombres"}],staticClass:"form-control",class:{"has-error":a.errores.nat_nombres},domProps:{value:a.abogado.nat_nombres},on:{input:[function(t){t.target.composing||a.$set(a.abogado,"nat_nombres",t.target.value)},function(t){return a.validarCampo("nat_nombres")}]}}),a.errores.nat_nombres?t("span",{staticClass:"error-message"},[a._v("Complete este campo para continuar.")]):a._e()])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("Correo")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.abogado.nat_correo,expression:"abogado.nat_correo"}],staticClass:"form-control",domProps:{value:a.abogado.nat_correo},on:{input:[function(t){t.target.composing||a.$set(a.abogado,"nat_correo",t.target.value)},a.validarCorreo]}}),a.correoValido?a._e():t("span",{staticClass:"error-message"},[a._v("Correo electrónico no válido")])])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[a._v("Telefono")]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.abogado.nat_telefono,expression:"abogado.nat_telefono"}],staticClass:"form-control",domProps:{value:a.abogado.nat_telefono},on:{keypress:a.validarNumeros,input:function(t){t.target.composing||a.$set(a.abogado,"nat_telefono",t.target.value)}}})])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"d-flex justify-content-end"},[t("button",{staticClass:"btn btn-secondary btn-lg mx-2 px-4 rounded",on:{click:a.cerrarModal}},[a._v("Cerrar")]),t("button",{staticClass:"btn btn-primary btn-lg rounded px-4",on:{click:a.guardar}},[a.isLoading?t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t("span",[a._v(a._s(a.abogado.abo_id?"Actualizar":"Guardar"))])])])])])])]):a._e()])])},e=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"row mb-4"},[t("h5",{staticClass:"text-dark fw-bold"},[a._v("Equipo UNPRG")])])},function(){var a=this,t=a._self._c;return t("thead",[t("tr",[t("th",[a._v("Documento")]),t("th",[a._v("Nombres")]),t("th",[a._v("Apellidos")]),t("th",[a._v("Telefono")]),t("th",[a._v("Email")]),t("th",[a._v("Opciones")])])])},function(){var a=this,t=a._self._c;return t("span",{},[t("i",{attrs:{"data-feather":"edit"}})])},function(){var a=this,t=a._self._c;return t("span",{},[t("i",{attrs:{"data-feather":"trash"}})])}],r=(o(70560),o(98164)),i=o.n(r),n=o(67324),l={name:"abogado",mixins:[n.Z],mounted(){this.leer()},updated(){i().replace()},data(){return{abogados:[],modalVisible:!1,dataTable:null,showModal:!1,abogado:{nat_dni:"",nat_apellido_paterno:"",nat_apellido_materno:"",nat_nombres:"",nat_telefono:"",nat_correo:""},errores:{nat_dni:!1,nat_apellido_paterno:!1,nat_apellido_materno:!1,nat_nombres:!1},isLoading:!1,correoValido:!0,mensajedni:null,mensajecorreo:null}},methods:{limpiarCampos(){for(let a in this.abogado)this.abogado.hasOwnProperty(a)&&(this.abogado[a]="")},limpiarErrores(){for(let a in this.errores)this.errores.hasOwnProperty(a)&&(this.errores[a]="")},validarNumeros(a){const t=a.which?a.which:a.keyCode;(t<48||t>57)&&a.preventDefault()},validarCampo(a){this.errores[a]=""===this.abogado[a]},validarCorreo(){const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.correoValido=a.test(this.abogado.nat_correo)},validarCampos(){return Object.keys(this.errores).forEach((a=>{this.validarCampo(a,a)})),!Object.values(this.errores).some((a=>a))},mostrarModal(){this.showModal=!0},cerrarModal(){this.showModal=!1,this.limpiarCampos(),this.limpiarErrores(),this.isLoading=!1},nombreCompleto(a){return`${a.nat_apellido_paterno} ${a.nat_apellido_materno}`},async crear(){if(this.validarCampos())try{this.isLoading=!0;const a=await this.$axios.post(`${this.$store.getters.get__url}/lawyer/store`,this.abogado,{headers:{Authorization:`Bearer ${this.$store.getters.get__token}`}});0===a.data.state?(this.abogados.push({...a.data.data}),this.showModal=!1,this.limpiarCampos(),this.isLoading=!1):1===a.data.state&&(this.isLoading=!1)}catch(a){const t=a.response.data.message;console.log(t),this.isLoading=!1}else console.log("Error en la validación de campos"),this.isLoading=!1},async leer(){try{this.$showLoadingAlert();const a=await this.$getData("lawyer",this);this.abogados=a.data,await this.$waitForDataTableDraw(this,"myDataTable"),this.$closeLoadingAlert()}catch(a){this.$handleApiError(a,"leer abogados")}},async actualizar(){if(this.validarCampos())try{this.isLoading=!0;const a=await this.$axios.post(`${this.$store.getters.get__url}/lawyer/update`,this.abogado,{headers:{Authorization:`Bearer ${this.$store.getters.get__token}`}});0===a.data.state?(this.limpiarCampos(),this.leer(),this.showModal=!1):(console.error("Error en la respuesta del servidor:",a.data),this.isLoading=!1)}catch(a){console.error("Error en la solicitud:",a.message),this.isLoading=!1}finally{this.isLoading=!1}else console.log("Error en la validación de campos")},async eliminar(a){this.$warningAlertWithCancel("Confirmar Eliminación","¿Estás seguro de que deseas eliminar a este abogado?",(async()=>{try{this.$showLoadingAlert("Eliminando","");const t=await this.$axios.post(`${this.$store.getters.get__url}/lawyer/delete/${a}`,this.abogado,{headers:{Authorization:`Bearer ${this.$store.getters.get__token}`}});if(204===t.status){this.$closeLoadingAlert();const t=this.abogados.findIndex((t=>t.abo_id===a));-1!==t&&this.abogados.splice(t,1)}else this.$closeLoadingAlert(),this.$warnignAlert("","Error al eliminar el abogado: Respuesta inesperada del servidor.")}catch(t){this.$closeLoadingAlert(),this.$warnignAlert("",`Error al realizar la solicitud: ${t.message}`)}}),(()=>{console.log("Eliminar abogado cancelado")}))},editar(a){try{const t=this.abogados.find((t=>t.abo_id===a));t?(this.abogado={...t},this.showModal=!0):console.error("Abogado no ENCONTRADO")}catch(t){console.error(t)}},guardar(){try{this.abogado.abo_id?this.actualizar(this.abogado.abo_id):this.crear()}catch(a){console.error(a)}}}},d=l,c=o(1001),m=(0,c.Z)(d,s,e,!1,null,"7b19fa55",null),p=m.exports},67324:function(a,t){t.Z={methods:{async initDataTable(){this.destroyDataTable(),await this.$nextTick(),this.dataTable=$(this.$refs.myDataTable).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},destroyDataTable(){this.dataTable&&this.dataTable.destroy()&&(this.dataTable=null)}},beforeDestroy(){this.destroyDataTable()}}}}]);
//# sourceMappingURL=665.a65c8b9d.js.map