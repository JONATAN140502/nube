"use strict";(self["webpackChunklegalcase"]=self["webpackChunklegalcase"]||[]).push([[340],{94340:function(t,a,e){e.r(a),e.d(a,{default:function(){return z}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"pc-container pb-4"},[a("div",{staticClass:"pcoded-content"},[a("div",{staticClass:"row mb-4"},[a("h5",{},[a("button",{staticClass:"btn btn-sm mr-2 btn-secondary",on:{click:t.goBack}},[a("i",{attrs:{"data-feather":"arrow-left"}})]),a("span",{staticClass:"text-primary"},[t._v("Expediente")]),t._v(" | "),a("span",{staticClass:"text-secondary"},[t._v(" "+t._s(t.numeroExpediente))])])]),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-md-2"},[a("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"1"===t.isVista},attrs:{type:"button"},on:{click:function(a){return t.selectVista("1")}}},[t._v(" Datos ")])]),a("div",{staticClass:"col-md-2"},[a("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"2"===t.isVista},attrs:{type:"button"},on:{click:function(a){return t.selectVista("2")}}},[t._v(" Archivos ")])]),a("div",{staticClass:"col-md-2"},[a("button",{staticClass:"btn btn-outline-primary w-100",class:{"btn-primary text-white":"3"===t.isVista},attrs:{type:"button"},on:{click:function(a){return t.selectVista("3")}}},[t._v(" Tareas ")])]),a("div",{staticClass:"col-md-2"},[a("button",{staticClass:"btn btn-outline-primary w-100",attrs:{type:"button"},on:{click:function(a){return t.redirectActualizar()}}},[t._v("Actualizar")])])]),"1"===t.isVista?a("General",{attrs:{id:t.idExpediente}}):"2"===t.isVista?a("Archivos",{attrs:{id:t.idExpediente}}):"3"===t.isVista?a("Tareas",{attrs:{id:t.idExpediente}}):t._e()],1)])},i=[],r=(e(44114),function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"card"},[t._m(0),t.expediente&&t.expediente.exp_id?a("div",[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row py-2"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4 fw-bold"},[t._v(" Expediente N° ")]),a("div",{staticClass:"col-xl-7 col-sm-8 fw-bold"},[t._v(" : "+t._s(t.expediente.exp_numero)+" ")])])])]),a("div",{staticClass:"row py-2"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Organo Juridisccional ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.expediente.exp_juzgado)+" ")])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Distrito Judicial ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.expediente.exp_distrito_judicial)+" ")])])])]),a("div",{staticClass:"row py-2"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Fecha de Inicio ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.$formatDate(t.expediente.exp_fecha_inicio))+" ")])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Especialidad ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.expediente.exp_especialidad)+" ")])])])]),a("div",{staticClass:"row py-2"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Pretension ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.expediente.exp_pretension)+" ")])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Monto de Pretension ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.expediente.exp_monto_pretension)+" ")])])])]),a("div",{staticClass:"row py-2"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Materia ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.expediente.exp_materia)+" ")])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-5 col-sm-4"},[t._v(" Estado ")]),a("div",{staticClass:"col-xl-7 col-sm-8"},[t._v(" : "+t._s(t.capitalizeFirstLetter(t.expediente.exp_estado))+" ")])])])])])]):t._e()])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"card"},[t._m(1),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{ref:"myDataTable",staticClass:"table table-hover",attrs:{id:"table","aria-describedby":"table-procesales"}},[t._m(2),a("tbody",[t._l(t.demandantes,(function(e){return a("tr",{key:e.id},[a("td",[t._v("Demandante")]),a("td",[t._v(t._s(t.getPersonaTipo(e.tipo_persona)))]),a("td",[t._v(t._s(t.getPersonaNombre(e)))]),a("td",[t._v(t._s(e.apellido_materno||"--"))]),a("td",[t._v(t._s(e.nombres||"--"))])])})),t._l(t.demandados,(function(e){return a("tr",{key:e.id},[a("td",[t._v("Demandado")]),a("td",[t._v(t._s(t.getPersonaTipo(e.tipo_persona)))]),a("td",[t._v(t._s(t.getPersonaNombre(e)))]),a("td",[t._v(t._s(e.apellido_materno||"--"))]),a("td",[t._v(t._s(e.nombres||"--"))])])}))],2)])])])])])])])}),o=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header"},[a("h5",{staticClass:"card-title"},[t._v("Datos Generales")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header"},[a("h5",{staticClass:"card-title"},[t._v("Partes Procesales")])])},function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("Parte Procesal")]),a("th",[t._v("Tipo de Persona")]),a("th",[t._v("Apellido Paterno / Razon Social")]),a("th",[t._v("Apellido Materno")]),a("th",[t._v("Nombres")])])])}],l=e(90740),c=e.n(l),n=e(2637),d=e(49148),u=e.n(d),h={mixins:[n.A],data(){return{dataTable:null,expediente:null,demandantes:[],demandados:[],formattedDate:"",id:""}},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesExpediente()},created(){this.id=this.$route.params.id},methods:{async cargarDetallesExpediente(){try{this.$showLoadingAlert();const t=await this.$getData(`proceeding/${this.id}`,this);this.expediente=t.expediente,await this.$waitForDataTableDraw(this,"myDataTable"),this.formatDate(),this.getProcesales(t.procesales),this.initDataTable(),this.$closeLoadingAlert()}catch(error){this.$handleApiError(error,"cargar detalles del expediente ",this.id)}},formatDate(){this.formattedDate=u()(this.expediente.exp_fecha_inicio).format("DD MMM YYYY")},getProcesales(t){if("DEMANDANTE"===t[0].tipo_procesal){this.demandantes=t,this.tipo_procesal="DEMANDANTE";const a={tipo_procesal:"Demandado",tipo_persona:"Juridica",razon_social:"UNPRG"};this.demandados.push(a)}else{this.demandados=t;const a={tipo_procesal:"Demandado",tipo_persona:"Juridica",razon_social:"UNPRG"};this.demandantes.push(a)}},getPersonaTipo(t){return"NATURAL"===t?"Natural":"Jurídica"},getPersonaNombre(t){return"NATURAL"===t.tipo_persona?t.apellido_paterno:t.razon_social||"--"},formatFecha(t){const a=new Date(t),e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};return a.toLocaleDateString("es-ES",e)},capitalizeFirstLetter(t){return t?t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase())):""},goBack(){this.$router.go(-1)}}},p=h,m=e(81656),v=(0,m.A)(p,r,o,!1,null,null,null),_=v.exports,b=function(){var t=this,a=t._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-body"},[0===t.ejes.length?a("div",[a("p",{staticClass:"text-muted"},[t._v("Actualmente no hay un archivo para este expediente. "),a("a",{staticClass:"text-primary",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.abrirModal(1)}}},[t._v("Haga click para cargar el archivo.")])])]):t._e(),t._l(t.ejes,(function(e,s){return a("div",{key:s,staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("label",{staticClass:"form-label"},[t._v("Ultima actualizacion")]),a("input",{staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:t.formatFecha(e.updated_at)}})]),a("div",{staticClass:"col-md-5"},[a("label",{staticClass:"form-label"},[t._v("Descipcion")]),a("input",{staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:e.doc_desciprcion}})]),a("div",{staticClass:"col-md-auto col-sm-6 d-flex"},[a("button",{staticClass:"btn btn-primary border-0 mt-auto",attrs:{title:e.doc_nombre},on:{click:function(a){return t.descargarArchivo(e.doc_ruta_archivo,e.doc_nombre)}}},[t._v("Descargar ")])]),a("div",{staticClass:"col-md-auto col-sm-6 d-flex"},[a("button",{staticClass:"btn btn-success border-0 mt-auto",on:{click:function(a){return t.abrirModaledit(2,e)}}},[t._v("Actualizar")])])])}))],2)])]),a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"d-flex align-items-center"},[a("h5",[t._v("ESCRITOS PRESENTADOS")]),a("button",{staticClass:"btn btn-sm btn-primary ml-auto px-4",attrs:{type:"button"},on:{click:function(a){return t.abrirModal(3)}}},[t._v(" Nuevo ")])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{ref:"dataTable",staticClass:"table table-hover m-b-0",attrs:{id:"table","aria-describedby":"tabla-escritos"}},[t._m(1),a("tbody",t._l(t.escritos,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(t.formatFecha(e.created_at)))]),a("td",[t._v(t._s(e.doc_desciprcion))]),a("td",{staticClass:"col-md-3"},[t._v(t._s(e.doc_nombre))]),a("td",[a("button",{staticClass:"btn btn-success rounded btn-lg py-1",staticStyle:{"font-size":"12px"},on:{click:function(a){return t.descargarArchivo(e.doc_ruta_archivo,e.doc_nombre)}}},[t._v(" Descargar ")])])])})),0)])])])])]),1===t.showModal?a("div",{staticClass:"modal",on:{click:t.cerrarModal}},[a("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[t._m(2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Seleccionar Archivo")]),a("input",{ref:"fileInput",staticClass:"form-control",attrs:{type:"file",requeried:""},on:{change:t.onFileChange}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Descripcion sobre el archivo")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.eje.descripcion,expression:"eje.descripcion"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.eje.descripcion},on:{input:function(a){a.target.composing||t.$set(t.eje,"descripcion",a.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cerrarModal()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.guardarEje()}}},[t._v("Guardar")])])])]):t._e(),2===t.showModal?a("div",{staticClass:"modal",on:{click:t.cerrarModal}},[a("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[t._m(3),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Seleccionar Archivo")]),a("input",{ref:"fileInput",staticClass:"form-control",attrs:{type:"file",requeried:""},on:{change:t.onFileChange}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Descripcion sobre el archivo")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.eje.descripcion,expression:"eje.descripcion"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.eje.descripcion},on:{input:function(a){a.target.composing||t.$set(t.eje,"descripcion",a.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cerrarModal()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.actualizarEje()}}},[t._v("Guardar")])])])]):t._e(),3===t.showModal?a("div",{staticClass:"modal",on:{click:t.cerrarModal}},[a("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[t._m(4),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Seleccionar Archivo")]),a("input",{ref:"fileInput",staticClass:"form-control",attrs:{type:"file",requeried:""},on:{change:t.onFileChange}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"NumeroExpediente"}},[t._v("Descripcion sobre el archivo")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.escrito.descripcion,expression:"escrito.descripcion"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.escrito.descripcion},on:{input:function(a){a.target.composing||t.$set(t.escrito,"descripcion",a.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cerrarModal()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.nuevoEscrito()}}},[t._v("Guardar")])])])]):t._e()])},C=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-header"},[a("h5",[t._v("ARCHIVO EJE DEL EXPEDIENTE")])])},function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("Fecha de presentacion")]),a("th",[t._v("Detalles")]),a("th",[t._v("Nombre de archivo")]),a("th",[t._v("Archivo")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Nuevo Archivo EJE")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Actualizar Archivo EJE")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("Nuevo Escrito")])])}],f=(e(14603),e(47566),e(98721),e(98355)),g=(e(36941),e(46587)),x=e.n(g),y={data(){return{dataTable:null,showModal:0,escritos:[],ejes:[],eje:{name:"",exp_id:"",doc_tipo:"EJE",descripcion:""},escrito:{exp_id:"",doc_tipo:"ESCRITO",descripcion:""},formattedDate:"",id:""}},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesExpediente()},async created(){this.id=this.$route.params.id,this.dataTable=null},methods:{async cargarDetallesExpediente(){try{this.$showLoadingAlert();const t=await this.$getData(`proceeding/${this.id}`,this);this.eje.exp_id=t.expediente.exp_id,this.escrito.exp_id=t.expediente.exp_id,this.escritos=t.escritos,this.ejes=t.eje,this.initDataTable(),console.log(this.escritos),this.$closeLoadingAlert()}catch(error){this.$handleApiError(error,"cargar detalles del expediente ",this.id)}},abrirModal(t){this.showModal=t},abrirModaledit(t,a){this.eje.name=a.doc_nombre,this.showModal=t},cerrarModal(){this.showModal=0},async navigateToPJ(){window.open("https://cej.pj.gob.pe/cej/forms/busquedaform.html","_blank")},formatDate(){this.formattedDate=u()(this.expediente.exp_fecha_inicio).format("DD/MM/YYYY")},formatFecha(t){const a=new Date(t),e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};return a.toLocaleDateString("es-ES",e)},async descargarArchivo(t,a){try{this.$showLoadingAlert("Descargando...","Obteniendo archivo, espere por favor...");const e=await f.A.get(this.$store.getters.get__url+"/archivos/descargar",{responseType:"blob",headers:{Authorization:"Bearer "+this.$store.getters.get__token},params:{nombre:t}}),s=new Blob([e.data],{type:e.headers["content-type"]});this.$closeLoadingAlert();const i=a.replace(/[^\w\s.]/gi,"-"),r=window.URL.createObjectURL(s),o=document.createElement("a");o.href=r,o.download=i,o.click()}catch(error){this.$handleApiError(error,"abrir el archivo ",this)}},goBack(){this.$router.go(-1)},async guardarEje(){if(this.archivoSeleccionado)try{this.$showLoadingAlert();const t=new FormData;t.append("file",this.selectedFile),await f.A.post(`${this.$store.getters.get__url}/archivos/guardar`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.getters.get__token},params:this.eje}),this.selectedFile=null,this.eje.descripcion="",this.showModal=0,this.$closeLoadingAlert(),this.cargarDetallesExpediente()}catch(error){console.error(error)}else this.$handleApiError(error,"guardar eje")},async actualizarEje(){if(this.archivoSeleccionado)try{this.$showLoadingAlert();const t=new FormData;t.append("file",this.selectedFile),await f.A.post(`${this.$store.getters.get__url}/archivos/actualizar/eje`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.getters.get__token},params:this.eje}),this.selectedFile=null,this.eje.descripcion="",this.showModal=0,this.$closeLoadingAlert(),this.cargarDetallesExpediente()}catch(error){console.error(error)}else this.$handleApiError(error,"actualizar eje")},async nuevoEscrito(){if(this.archivoSeleccionado){const t=new FormData;t.append("file",this.selectedFile);try{this.$showLoadingAlert();const a=await f.A.post(`${this.$store.getters.get__url}/archivos/guardar`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.$store.getters.get__token}`},params:this.escrito}),e=a.data.data;this.escritos.push(e),this.initDataTable(),this.selectedFile=null,this.escrito.descripcion="",this.showModal=0,this.$closeLoadingAlert()}catch(error){console.error(error)}}else this.$handleApiError(error,"guardar escrito")},onFileChange(t){this.selectedFile=t.target.files[0];const a=t.target;this.archivoSeleccionado=a.files.length>0},async initDataTable(){this.destroyDataTable(),await this.$nextTick(),this.dataTable=x()(this.$refs.dataTable).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},destroyDataTable(){this.dataTable&&this.dataTable.destroy()&&(this.dataTable=null)}},beforeDestroy(){this.destroyDataTable()}},A=y,D=(0,m.A)(A,b,C,!1,null,"7122bf6c",null),w=D.exports,$=function(){var t=this,a=t._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"d-flex align-items-center"},[a("h5",[a("a",{staticClass:"btn-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toggleCardAudiencias()}}},[t._v("Lista de Audiencias")])]),a("button",{staticClass:"btn btn-sm btn-primary ml-auto px-4",attrs:{type:"button"},on:{click:function(a){return t.abrirModal(1)}}},[t._v("Nueva Audiencia")])])]),t.cardAudiencias?a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{ref:"dataTable1",staticClass:"table",attrs:{id:"table","aria-describedby":"table-audiencias"}},[t._m(0),a("tbody",t._l(t.audiencias,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.aud_detalles))]),a("td",[t._v(t._s(t.obtenerDemandante(e)))]),a("td",[t._v(t._s(t.$formatHora(e.aud_hora)))]),a("td",[t._v(t._s(t.$formatFecha(e.aud_fecha)))]),a("td",[t._v(t._s(e.aud_lugar))])])})),0)])])]):t._e()])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("div",{staticClass:"d-flex align-items-center"},[a("h5",[a("a",{staticClass:"btn-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toggleCardAlertas()}}},[t._v("Lista de Alertas")])]),a("button",{staticClass:"btn btn-sm btn-primary ml-auto px-4",attrs:{type:"button"},on:{click:function(a){return t.abrirModal(2)}}},[t._v("Nueva Alerta")])])]),t.cardAlertas?a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{ref:"dataTable2",staticClass:"table",attrs:{id:"table","aria-describedby":"table-Alertas"}},[t._m(1),a("tbody",t._l(t.alertas,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.ale_descripcion))]),a("td",[t._v(t._s(t.$formatFecha(e.fecha)))]),t._m(2,!0)])})),0)])])]):t._e()])]),1===t.showModal?a("div",{staticClass:"modal",on:{click:t.cerrarModal}},[a("div",{staticClass:"modal-content border-0",on:{click:function(t){t.stopPropagation()}}},[t._m(3),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[t._v("Lugar")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audiencia.au_lugar,expression:"audiencia.au_lugar"}],staticClass:"form-control border-0",attrs:{type:"text",disabled:""},domProps:{value:t.audiencia.au_lugar},on:{input:function(a){a.target.composing||t.$set(t.audiencia,"au_lugar",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("label",{staticClass:"form-label"},[t._v("Hora")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audiencia.au_hora,expression:"audiencia.au_hora"}],staticClass:"form-control",attrs:{type:"time"},domProps:{value:t.audiencia.au_hora},on:{input:function(a){a.target.composing||t.$set(t.audiencia,"au_hora",a.target.value)}}})]),a("div",{staticClass:"col-md-6"},[a("label",{staticClass:"form-label"},[t._v("Fecha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audiencia.au_fecha,expression:"audiencia.au_fecha"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.audiencia.au_fecha},on:{input:function(a){a.target.composing||t.$set(t.audiencia,"au_fecha",a.target.value)}}})])])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"Detalles"}},[t._v("Detalles o notas a tomar en cuenta para la audiencia")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.audiencia.au_detalles,expression:"audiencia.au_detalles"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.audiencia.au_detalles},on:{input:function(a){a.target.composing||t.$set(t.audiencia,"au_detalles",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"Detalles"}},[t._v("Enlace de reunión si la audiencia es Virtual")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.audiencia.au_link,expression:"audiencia.au_link"}],staticClass:"form-control",attrs:{type:"text",id:"Detalles"},domProps:{value:t.audiencia.au_link},on:{input:function(a){a.target.composing||t.$set(t.audiencia,"au_link",a.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-lg btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cerrarModal()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"button"},on:{click:function(a){return t.guardarAudiencia()}}},[t._v("Guardar")])])])]):t._e(),2===t.showModal?a("div",{staticClass:"modal",on:{click:t.cerrarModal}},[a("div",{staticClass:"modal-content border-0",on:{click:function(t){t.stopPropagation()}}},[t._m(4),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[t._v("Fecha de vencimiento")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.alerta.ale_fecha_vencimiento,expression:"alerta.ale_fecha_vencimiento"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.alerta.ale_fecha_vencimiento},on:{input:function(a){a.target.composing||t.$set(t.alerta,"ale_fecha_vencimiento",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"Detalles"}},[t._v("Detalles o notas a tomar en cuenta para la audiencia")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.alerta.ale_descripcion,expression:"alerta.ale_descripcion"}],staticClass:"form-control",attrs:{id:"Detalles"},domProps:{value:t.alerta.ale_descripcion},on:{input:function(a){a.target.composing||t.$set(t.alerta,"ale_descripcion",a.target.value)}}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-lg btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cerrarModal()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"button"},on:{click:function(a){return t.guardarAlerta()}}},[t._v("Guardar")])])])]):t._e()])},E=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Detalles")]),a("th",[t._v("Demandante")]),a("th",[t._v("Hora")]),a("th",[t._v("Fecha")]),a("th",[t._v("Lugar")])])])},function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Descripcion")]),a("th",[t._v("Fecha de Vencimiento")]),a("th",[t._v("Acciones")])])])},function(){var t=this,a=t._self._c;return a("td",[a("button",{staticClass:"btn btn-sm btn-primary mx-2",attrs:{type:"button"}},[t._v("Editar")]),a("button",{staticClass:"btn btn-sm btn-danger mx-2",attrs:{type:"button"}},[t._v("Eliminar")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal-header bg-primary border-0"},[a("h5",{staticClass:"modal-title text-white"},[t._v("Registrar nueva Audiencia")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal-header bg-primary border-0"},[a("h5",{staticClass:"modal-title text-white"},[t._v("Registrar nueva Alerta")])])}],T=e(46587),k={data(){return{dataTable1:null,dataTable2:null,audiencias:null,alertas:null,showModal:0,cardAudiencias:!0,cardAlertas:!0,alerta:{exp_id:"",ale_fecha_vencimiento:"",ale_descripcion:""},audiencia:{per_id:"",exp_id:"",au_fecha:"",au_hora:"",au_detalles:"",au_lugar:"",au_link:""},expediente:null,demandante:null,demandado:null,pretencion:null,juzgado:null,showalerta:!1,showaudiencia:!1}},created(){this.audiencia.exp_id=this.$route.params.id,this.alerta.exp_id=this.$route.params.id},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesExpediente(),this.listarAudiencias(),this.listarAlertas()},methods:{abrirModal(t){this.showModal=t},cerrarModal(){this.showModal=0},toggleCardAudiencias(){this.cardAudiencias=!this.cardAudiencias},toggleCardAlertas(){this.cardAlertas=!this.cardAlertas},limpiarCampos(t){t&&"object"===typeof t?Object.keys(t).forEach((a=>{t[a]=""})):console.error("El argumento proporcionado no es un objeto válido.")},async listarAudiencias(){try{const t={exp_id:this.$route.params.id},a=await this.$postData("proceeding/audiencias",this,t);if(!a.data)throw new Error("Error al obtener audiencias desde la API");this.audiencias=a.data,this.initDataTable("dataTable1")}catch(error){this.$handleApiError(error,"listar audiencias")}},async listarAlertas(){try{const t={exp_id:this.$route.params.id},a=await this.$postData("proceeding/alertas",this,t);if(console.log(a),!a.data)throw new Error("Error al obtener audiencias desde la API");this.alertas=a.data,this.initDataTable("dataTable2")}catch(error){this.$handleApiError(error,"listar alertas")}},getProcesal(t){return`${t.nat_nombres} ${t.nat_apellido_paterno} ${t.nat_apellido_materno}`},mostrarAlerta(){this.showalerta=!0,this.showaudiencia=!1},mostrarAudiencia(){this.showaudiencia=!0,this.showalerta=!1},obtenerDemandante(t){const a="UNPRG",e="0"===t.multiple?t.nombre_completo:"Demanda Colectiva",s="NATURAL"===t.tipo_persona?e:t.jur_razon_social,i="DEMANDANTE"===t.tipo_procesal?s:a;return i},obtenerDemandado(t){const a="UNPRG",e="0"===t.multiple?t.nombre_completo:"Demanda Colectiva",s="NATURAL"===t.tipo_persona?e:t.jur_razon_social,i="DEMANDADO"===t.tipo_procesal?s:a;return i},async cargarDetallesExpediente(){try{this.$showLoadingAlert();const t={exp_id:this.$route.params.id},a=await this.$postData("proceeding/buscarPorId",this,t);this.audiencia.au_lugar=a.data.juzgado,this.audiencia.per_id=a.data.procesal[0].per_id,this.$closeLoadingAlert()}catch(error){this.$handleApiError(error,"cargar datos del expediente")}},async guardarAlerta(){try{this.$showLoadingAlert();const t=await this.$postData("alerta/store",this,this.alerta);0===t.state?(this.listarAlertas(),this.limpiarCampos(this.alerta),this.cerrarModal()):alert("Datos no Registrados"),this.$closeLoadingAlert()}catch(error){this.$handleApiError(error,"cargar datos del expediente")}},async guardarAudiencia(){try{this.$showLoadingAlert();const t=await this.$postData("audiences/store",this,this.audiencia);0===t.state?(this.listarAudiencias(),this.limpiarCampos(this.audiencia),this.cerrarModal()):alert("Datos no Registrados"),this.$closeLoadingAlert()}catch(error){this.$handleApiError(error,"cargar datos del expediente")}},goBack(){this.$router.go(-1)},async initDataTable(t){this.destroyDataTable(t),await this.$nextTick(),this[t]=T(this.$refs[t]).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},destroyDataTable(t){this[t]&&(this[t].destroy(),this[t]=null)}},beforeDestroy(){this.destroyDataTable()}},M=k,N=(0,m.A)(M,$,E,!1,null,"2324e3bd",null),j=N.exports,P={components:{General:_,Archivos:w,Tareas:j},data(){return{isVista:"1",numeroExpediente:"",idExpediente:""}},mounted(){this.$nextTick((()=>{c().replace()})),this.cargarDetallesExpediente()},created(){this.idExpediente=this.$route.params.id},methods:{selectVista(t){this.isVista=t},async cargarDetallesExpediente(){try{this.$showLoadingAlert();const t=await this.$getData(`proceeding/${this.idExpediente}`,this);this.numeroExpediente=t.expediente.exp_numero,this.$closeLoadingAlert()}catch(error){this.$handleApiError(error,"cargar detalles del expediente ",this.idExpediente)}},redirectActualizar(){this.$router.push({name:"expediente/actualizacion/civil-laboral",params:{id:this.idExpediente}})},goBack(){this.$router.push({path:"/expediente/busqueda"})}}},L=P,F=(0,m.A)(L,s,i,!1,null,null,null),z=F.exports},2637:function(t,a,e){var s=e(46587);a.A={methods:{async initDataTable(){this.destroyDataTable(),await this.$nextTick(),this.dataTable=s(this.$refs.myDataTable).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}})},destroyDataTable(){this.dataTable&&this.dataTable.destroy()&&(this.dataTable=null)}},beforeDestroy(){this.destroyDataTable()}}}}]);
//# sourceMappingURL=340.5e969175.js.map